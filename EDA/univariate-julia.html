<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.0.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Using Julia for Introductory Statistics - 2&nbsp; Univariate data</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../EDA/tabular-data-julia.html" rel="next">
<link href="../index.html" rel="prev">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Univariate data</span></h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../">Using Julia for Introductory Statistics</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/jverzani/UsingJ" title="Source Code" class="sidebar-tool px-1"><i class="bi bi-github"></i></a>
    <a href="../Using-Julia-for-Introductory-Statistics.pdf" title="Download PDF" class="sidebar-tool px-1"><i class="bi bi-file-pdf"></i></a>
</div>
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Julia introduction</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">Exploratory Data Analysis</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../EDA/univariate-julia.html" class="sidebar-item-text sidebar-link active"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Univariate data</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../EDA/tabular-data-julia.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Tabular data</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../EDA/bivariate-julia.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Bivariate data</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../EDA/categorical-data-julia.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Categorical data</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../EDA/makie.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">The AlgebraOfGraphics</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">Inference</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Inference/distributions.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Probability distributions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Inference/inference.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Inference</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">Linear Models</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../LinearModels/linear-regression.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">The linear regression model</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#data-vectors" id="toc-data-vectors" class="nav-link active" data-scroll-target="#data-vectors"> <span class="header-section-number">2.1</span> Data vectors</a>
  <ul class="collapse">
  <li><a href="#missing-values" id="toc-missing-values" class="nav-link" data-scroll-target="#missing-values"> <span class="header-section-number">2.1.1</span> Missing values</a></li>
  <li><a href="#names-named-tuples" id="toc-names-named-tuples" class="nav-link" data-scroll-target="#names-named-tuples"> <span class="header-section-number">2.1.2</span> Names (named tuples)</a></li>
  <li><a href="#indexing" id="toc-indexing" class="nav-link" data-scroll-target="#indexing"> <span class="header-section-number">2.1.3</span> Indexing</a></li>
  <li><a href="#assignment" id="toc-assignment" class="nav-link" data-scroll-target="#assignment"> <span class="header-section-number">2.1.4</span> Assignment</a></li>
  </ul></li>
  <li><a href="#sec-data-types" id="toc-sec-data-types" class="nav-link" data-scroll-target="#sec-data-types"> <span class="header-section-number">2.2</span> Data types</a>
  <ul class="collapse">
  <li><a href="#sec-numeric-data-types" id="toc-sec-numeric-data-types" class="nav-link" data-scroll-target="#sec-numeric-data-types"> <span class="header-section-number">2.2.1</span> Numeric data types</a></li>
  <li><a href="#sec-categ-data-types" id="toc-sec-categ-data-types" class="nav-link" data-scroll-target="#sec-categ-data-types"> <span class="header-section-number">2.2.2</span> Categorical data types</a></li>
  <li><a href="#sec-logical-data" id="toc-sec-logical-data" class="nav-link" data-scroll-target="#sec-logical-data"> <span class="header-section-number">2.2.3</span> Logical data and operators</a></li>
  <li><a href="#sec-date-time-types" id="toc-sec-date-time-types" class="nav-link" data-scroll-target="#sec-date-time-types"> <span class="header-section-number">2.2.4</span> Date and time types</a></li>
  <li><a href="#structured-data" id="toc-structured-data" class="nav-link" data-scroll-target="#structured-data"> <span class="header-section-number">2.2.5</span> Structured data</a></li>
  </ul></li>
  <li><a href="#sec-defining-functions" id="toc-sec-defining-functions" class="nav-link" data-scroll-target="#sec-defining-functions"> <span class="header-section-number">2.3</span> Functions</a></li>
  <li><a href="#sec-numeric-data" id="toc-sec-numeric-data" class="nav-link" data-scroll-target="#sec-numeric-data"> <span class="header-section-number">2.4</span> Numeric summaries</a></li>
  <li><a href="#sec-shape" id="toc-sec-shape" class="nav-link" data-scroll-target="#sec-shape"> <span class="header-section-number">2.5</span> Shape</a></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/jverzani/UsingJ/edit/master/EDA/univariate-julia.qmd" class="toc-action">Edit this page</a></p><p><a href="https://github.com/jverzani/UsingJ/issues/new" class="toc-action">Report an issue</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span id="sec-univariate-data" class="quarto-section-identifier d-none d-lg-block"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Univariate data</span></span></h1>
</div>



<div class="quarto-title-meta">

    
    
  </div>
  

</header>

<p>Statistics involves the study of data. A data set can be a single value, or <em>scalar</em>, but more commonly is a collection of values. This chapter covers the basic containers used in <code>Julia</code> to store and manipulate data sets for a single variable in statistics. In addition it shows some basic summaries of a single variable.</p>
<section id="data-vectors" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="data-vectors"><span class="header-section-number">2.1</span> Data vectors</h2>
<p><code>Julia</code> offers several containers for storing ordered data, such as in a data set <span class="math inline">\(x_1, x_2, \dots, x_n\)</span>.</p>
<p>We consider this data on the number of whale beachings in a certain area by year during a decade:</p>
<pre><code>74 122 235 111 292 111 211 133 156 79</code></pre>
<p>As the data in a data set is typically of the same type (integer here, or character, number, …) and may be quite large a vector is a natural choice for storage in <code>Julia</code>.</p>
<p>Vectors are created using square brackets with entries separated by commas. Storing this in a vector and assigning to a variable, <code>whale</code>, is then done with:</p>
<div class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>whale <span class="op">=</span> [<span class="fl">74</span>, <span class="fl">122</span>, <span class="fl">235</span>, <span class="fl">111</span>, <span class="fl">292</span>, <span class="fl">111</span>, <span class="fl">211</span>, <span class="fl">133</span>, <span class="fl">156</span>, <span class="fl">79</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="2">
<pre><code>10-element Vector{Int64}:
  74
 122
 235
 111
 292
 111
 211
 133
 156
  79</code></pre>
</div>
</div>
<p>Without using commas, a matrix is created:</p>
<div class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>whale_matrix <span class="op">=</span> [<span class="fl">74</span> <span class="fl">122</span> <span class="fl">235</span> <span class="fl">111</span> <span class="fl">292</span> <span class="fl">111</span> <span class="fl">211</span> <span class="fl">133</span> <span class="fl">156</span> <span class="fl">79</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="3">
<pre><code>1×10 Matrix{Int64}:
 74  122  235  111  292  111  211  133  156  79</code></pre>
</div>
</div>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Space saving measure
</div>
</div>
<div class="callout-body-container callout-body">
<p>For purposes of printing only, we use the trailing <code>|&gt; permutedims</code> below to to print a <em>column</em> vector, as a <em>row</em> vector in the following, as with:</p>
<div class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>whale <span class="op">|&gt;</span> permutedims</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="4">
<pre><code>1×10 Matrix{Int64}:
 74  122  235  111  292  111  211  133  156  79</code></pre>
</div>
</div>
<p>This uses the chaining operation to call the <code>permutedims</code> function on the vector.</p>
</div>
</div>
<p>Internally a vector is a <span class="math inline">\(1\)</span>-dimensional array, a matrix a <span class="math inline">\(2\)</span> dimensional array. <code>Julia</code> has a general <span class="math inline">\(N\)</span> dimensional array type that these are specializations of. For a matrix, one uses space to separate row elements and semicolons to separate rows. Vectors are useful for storing data; matrices can be used to store data, but are widely used to represent mathematical values, as they have an associated algebra that can compactly represent many operations; arrays are not used in our discussion.</p>
<p>As seen in the output above, <code>Julia</code> prints the size and <em>element type</em> of a vector. In this case, a vector of integers (<code>Int64</code>). The constructor (<code>[]</code>) will promote values to a common type, which may be <code>Any</code>, a catch all type.</p>
<p>Vectors have a length, found by <code>length</code>, which in this case is the number of data points, often labeled <span class="math inline">\(n\)</span>. More generally, arrays have a <code>size</code>:</p>
<div class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(whale), <span class="fu">size</span>(whale)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="5">
<pre><code>(10, (10,))</code></pre>
</div>
</div>
<p>The size is returned as a <code>tuple</code>, in this case with just 1 element, as vectors are <span class="math inline">\(1\)</span> dimensional.</p>
<p>The <code>length</code> function is a reduction, returning a summary of a vector. Similarly, <code>sum</code> will add the elements, returning a number. Here we see how to compute the mean:</p>
<div class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(whale) <span class="op">/</span> <span class="fu">length</span>(whale)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="6">
<pre><code>152.4</code></pre>
</div>
</div>
<p>The <code>mean</code> function is not part of base <code>Julia</code>. It can be found in the <code>Statistics</code> package, which comes bundled with <code>Julia</code>, but we prefer to use the <code>StatsBase</code> package:</p>
<div class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">StatsBase</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(whale)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="7">
<pre><code>152.4</code></pre>
</div>
</div>
<section id="missing-values" class="level3" data-number="2.1.1">
<h3 data-number="2.1.1" class="anchored" data-anchor-id="missing-values"><span class="header-section-number">2.1.1</span> Missing values</h3>
<p><code>Julia</code> uses <code>missing</code> to represent missing values. For example, data on the cost of a hip replacement at various hospitals was found from their websites and is given by:</p>
<pre><code>10500, 45000, 74100, unavailable, 83500,
86000, 38200, unavailable, 44300, 12500,
55700, 43900, 71900, unavailable, 62000</code></pre>
<p>When the cost could not be identified, it was labeled “unavailable.” We replace the colloquial “unavailable” with the special value <code>missing</code> and enter the values into a vector:</p>
<div class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>hip_cost <span class="op">=</span> [<span class="fl">10500</span>, <span class="fl">45000</span>, <span class="fl">74100</span>, <span class="cn">missing</span>, <span class="fl">83500</span>, <span class="fl">86000</span>, <span class="fl">38200</span>, <span class="cn">missing</span>,</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>            <span class="fl">44300</span>, <span class="fl">12500</span>, <span class="fl">55700</span>, <span class="fl">43900</span>, <span class="fl">71900</span>, <span class="cn">missing</span>, <span class="fl">62000</span>]</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>hip_cost <span class="op">|&gt;</span> permutedims</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="8">
<pre><code>1×15 reshape(::Vector{Union{Missing, Int64}}, 1, 15) with eltype Union{Missing, Int64}:
 10500  45000  74100  missing  83500  …  55700  43900  71900  missing  62000</code></pre>
</div>
</div>
<p>We highlight that the type of element in <code>hip_cost</code> is <code>Union{Missing, Int64}</code>, a type that allows an element to be either an integer or a <code>missing</code> element.</p>
<p>The <code>missing</code> value propagates through computations:</p>
<div class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(hip_cost)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="9">
<pre><code>missing</code></pre>
</div>
</div>
<p>In particular, all of these basic combinations with <code>missing</code> yield <code>missing</code>, as they should – if data is not available, combinations based on that data are still not available:</p>
<div class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fl">1</span> <span class="op">+</span> <span class="cn">missing</span>, <span class="fl">1</span> <span class="op">-</span> <span class="cn">missing</span>, <span class="fl">1</span><span class="op">*</span><span class="cn">missing</span>, <span class="fl">1</span><span class="op">/</span><span class="cn">missing</span>, <span class="cn">missing</span><span class="op">^</span><span class="fl">2</span>, <span class="cn">missing</span> <span class="op">==</span> <span class="cn">true</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="10">
<pre><code>(missing, missing, missing, missing, missing, missing)</code></pre>
</div>
</div>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Also nothing and something
</div>
</div>
<div class="callout-body-container callout-body">
<p>In <code>Julia</code> there is also <code>nothing</code>. The semantics are a bit different, and <code>missing</code> is the designed choice for data. (The <code>nothing</code> value is useful for general programming purposes.) For floating point values, there is also <code>NaN</code>, or not a number. This too ios often used, as a sentinel value, to indicate missingness, though <code>missing</code> is suggested. The <code>something</code> function is used to skip over its arguments until a non-<code>nothing</code> value is found.</p>
</div>
</div>
<p>To work with missing data, it can be removed or skipped over. The <code>skipmissing</code> function provides a wrapper around an object which when iterated over, will skip the missing values. For example:</p>
<div class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">skipmissing</span>(hip_cost))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="11">
<pre><code>627600</code></pre>
</div>
</div>
<p>The <code>sum</code> function iterates over the values in the container it is passed to reduce them to a value, <code>mean</code> is similar and works with <code>skipmissing</code> in an identical manner:</p>
<div class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(<span class="fu">skipmissing</span>(hip_cost))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="12">
<pre><code>52300.0</code></pre>
</div>
</div>
<p>(Which is helpful, as <code>length</code>, used above to compute a mean, does not work with <code>skipmissing</code>.)</p>
</section>
<section id="names-named-tuples" class="level3" data-number="2.1.2">
<h3 data-number="2.1.2" class="anchored" data-anchor-id="names-named-tuples"><span class="header-section-number">2.1.2</span> Names (named tuples)</h3>
<p>It may be natural to assign the year of measurement to the values in <code>whale</code>, but vectors, as defined in base <code>Julia</code>, do not allow names as an attribute. (There are external packages that allow this, e.g.&nbsp;<code>NamedArrays</code>, which arise in our discussion of contingency tables.) If names are important, <code>Julia</code> provides a named tuple type, which builds on the basic tuple type.</p>
<p>While vectors are collections of <em>homogeneous</em> values, tuples are collections of <em>heterogeneous</em> values. Tuples are constructed with commas, and typically parentheses to delimit the comma<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>:</p>
<div class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>whale <span class="op">=</span> (<span class="fl">74</span>, <span class="fl">122</span>, <span class="fl">235</span>, <span class="fl">111</span>, <span class="fl">292</span>, <span class="fl">111</span>, <span class="fl">211</span>, <span class="fl">133</span>, <span class="fl">156</span>, <span class="fl">79</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="13">
<pre><code>(74, 122, 235, 111, 292, 111, 211, 133, 156, 79)</code></pre>
</div>
</div>
<p>One-element tuples are distinguished by using a trailing command and parentheses:</p>
<div class="cell" data-execution_count="13">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>a_lone_whale <span class="op">=</span> (<span class="fl">101</span>,)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="14">
<pre><code>(101,)</code></pre>
</div>
</div>
<p>For the many purposes, tuples can be exchanged for vectors, as both are iterable<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a>:</p>
<div class="cell" data-execution_count="14">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(whale), <span class="fu">mean</span>(whale), <span class="fu">length</span>(whale)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="15">
<pre><code>(1524, 152.4, 10)</code></pre>
</div>
</div>
<p>Unlike vectors, but like numbers, tuples can not be <em>modified</em> after construction. This allows tuples to be quite useful – and performant – for programming purposes.</p>
<p>Tuples can also have names. The basic construction uses “key=value” pairs:</p>
<div class="cell" data-execution_count="15">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>test_scores <span class="op">=</span> (Alice <span class="op">=</span> <span class="fl">87</span>, Bob <span class="op">=</span> <span class="fl">72</span>, Shirley <span class="op">=</span> <span class="fl">99</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="16">
<pre><code>(Alice = 87, Bob = 72, Shirley = 99)</code></pre>
</div>
</div>
<p>The names are not quoted, and are stored internally as a tuple of symbols. Extra effort is necessary to create names with spaces or number. In the following we show that <code>var"..."</code> is useful to create more complicated symbols<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a>:</p>
<div class="cell" data-execution_count="16">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>children <span class="op">=</span> (var<span class="st">"X Æ A-Xii"</span> <span class="op">=</span> <span class="fl">1</span>,</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>            var<span class="st">"Vivian Jenna Wilson"</span> <span class="op">=</span> <span class="fl">2</span>,</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>            var<span class="st">"Exa Dark Sideræl"</span> <span class="op">=</span> <span class="fl">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="17">
<pre><code>(var"X Æ A-Xii" = 1, var"Vivian Jenna Wilson" = 2, var"Exa Dark Sideræl" = 3)</code></pre>
</div>
</div>
<p>The above also shows that Unicode values are easily used within <code>Julia</code> in strings or as identifiers.</p>
<p>Named tuples can also have their “names” attached via parsing, through a syntax similar to keyword arguments of functions, as identifiers imply names:</p>
<div class="cell" data-execution_count="17">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span> [<span class="fl">1</span>,<span class="fl">2</span>]; b <span class="op">=</span> [<span class="fl">3</span>,<span class="fl">4</span>]</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>(; a, b)  <span class="co"># same as (a=a, b=b)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="18">
<pre><code>(a = [1, 2], b = [3, 4])</code></pre>
</div>
</div>
<p>This gives several different ways to construct <span class="math inline">\(1\)</span>-element named tuples, where something is done to disambiguate the use of enclosing parentheses:</p>
<div class="cell" data-execution_count="18">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>(; a), (; a<span class="op">=</span>a), (; <span class="op">:</span>a <span class="op">=&gt;</span> a), (a<span class="op">=</span>a, )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="19">
<pre><code>((a = [1, 2],), (a = [1, 2],), (a = [1, 2],), (a = [1, 2],))</code></pre>
</div>
</div>
<p>Named tuples can have their values accessed by name using <code>getproperty</code>, which has a <code>.</code> for convenient syntax:</p>
<div class="cell" data-execution_count="19">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>test_scores.Alice</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="20">
<pre><code>87</code></pre>
</div>
</div>
<p>The generic function <code>keys</code> will return the names (“keys” are used to look up a value) and <code>values</code> will extract the values.</p>
<p>Named tuples being both named and heterogeneous are a natural container for collecting data on several different variables for a single case, as will be seen in the discussion on tabular data.</p>
<section id="associative-arrays" class="level4">
<h4 class="anchored" data-anchor-id="associative-arrays">Associative arrays</h4>
<p>Abstractly, an <em>associative array</em> is a container for storing (key,value) pairs. <code>Julia</code> has the notation <code>key =&gt; value</code> for representing a <em>pair</em>. A named tuple is an immutables associative array where the keys are symbols. A <em>dictionary</em> is a more general <em>mutable</em> type with the keys being arbitrary (numbers, strings, symbols, …). There are various implementations, the <code>Dict</code> constructor the most commonly used. As with a named tuple, the keys are returned by <code>keys</code>, the values by <code>values</code>, and pairs by <code>pairs</code>.</p>
</section>
</section>
<section id="indexing" class="level3" data-number="2.1.3">
<h3 data-number="2.1.3" class="anchored" data-anchor-id="indexing"><span class="header-section-number">2.1.3</span> Indexing</h3>
<p>The elements of a vector, like a data set, are indexed. For basic vectors Julia uses one-based indexing<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a>. The <code>whale</code> data, as defined, has <span class="math inline">\(10\)</span> elements, we can get the third, fourth, and sixth with:</p>
<div class="cell" data-execution_count="20">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>whale <span class="op">=</span> [<span class="fl">74</span>, <span class="fl">122</span>, <span class="fl">235</span>, <span class="fl">111</span>, <span class="fl">292</span>, <span class="fl">111</span>, <span class="fl">211</span>, <span class="fl">133</span>, <span class="fl">156</span>, <span class="fl">79</span>]</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>whale[<span class="fl">3</span>], whale[<span class="fl">4</span>], whale[<span class="fl">6</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="21">
<pre><code>(235, 111, 111)</code></pre>
</div>
</div>
<p>The above uses three function calls, and displays as a tuple does. (Since the commas produce a tuple.)</p>
<p>To retrieve these same values in a single call, we can pass a vector of indices:</p>
<div class="cell" data-execution_count="21">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>whale[ [<span class="fl">3</span>,<span class="fl">4</span>,<span class="fl">6</span>] ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="22">
<pre><code>3-element Vector{Int64}:
 235
 111
 111</code></pre>
</div>
</div>
<p>The <code>end</code> keyword refers to the last index of a collection. Similarly, <code>begin</code> refers to the first index inside the square brackets.</p>
<div class="cell" data-execution_count="22">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>whale[<span class="kw">end</span>], whale[begin]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="23">
<pre><code>(79, 74)</code></pre>
</div>
</div>
<p>These values allow simple arithmetic. Here we see how to trim off the first and last through indexing<a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a>:</p>
<div class="cell" data-execution_count="23">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>whale[begin<span class="op">+</span><span class="fl">1</span><span class="op">:</span><span class="kw">end</span><span class="op">-</span><span class="fl">1</span>] <span class="op">|&gt;</span> permutedims</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="24">
<pre><code>1×8 Matrix{Int64}:
 122  235  111  292  111  211  133  156</code></pre>
</div>
</div>
<p>The colon, <code>:</code>, refers to all indices in a vector; <code>whale[:]</code> will return a copy of the data in <code>whale</code>.</p>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Indexing with a container of values
</div>
</div>
<div class="callout-body-container callout-body">
<p>The range <code>1:1</code> specifies the value <code>1</code>, as does just <code>1</code>, but for indexing the two are different:</p>
<div class="cell" data-execution_count="24">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>whale[<span class="fl">1</span>], whale[<span class="fl">1</span><span class="op">:</span><span class="fl">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="25">
<pre><code>(74, [74])</code></pre>
</div>
</div>
<p>The idiom is indexing by a scalar – like <code>1</code> – can drop dimensions (the vector becomes a scalar), whereas indexing by a container – like <code>1:1</code> or, say, <code>[1]</code> – does not drop dimensions. The documentation for indexing of an array has: “If all the indices are scalars, then the result, <code>X</code>, is a single element from the array, <code>A</code>. Otherwise, <code>X</code> is an array with the same number of dimensions as the sum of the dimensionalities of all the indices.”</p>
</div>
</div>
<section id="views" class="level4">
<h4 class="anchored" data-anchor-id="views">Views</h4>
<p>The extraction of values from a vector, as above, necessitates the allocation of memory to store the copy of the values. When the data set is large, or is accessed many times, these allocations may be avoided using a “view” of the data. Views create a lazy reference to the underlying data in the array. The <code>view</code> function takes the object as its first argument, and indices for its remaining arguments<a href="#fn6" class="footnote-ref" id="fnref6" role="doc-noteref"><sup>6</sup></a>:</p>
<div class="cell" data-execution_count="25">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">view</span>(whale, [<span class="fl">3</span>,<span class="fl">4</span>,<span class="fl">6</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="26">
<pre><code>3-element view(::Vector{Int64}, [3, 4, 6]) with eltype Int64:
 235
 111
 111</code></pre>
</div>
</div>
<p>The <code>end</code> and <code>begin</code> keywords do not work with <code>view</code><a href="#fn7" class="footnote-ref" id="fnref7" role="doc-noteref"><sup>7</sup></a>, though the <code>lastindex</code> and <code>firstindex</code> functions do:</p>
<div class="cell" data-execution_count="26">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="fu">view</span>(whale, <span class="fu">firstindex</span>(whale)<span class="op">+</span><span class="fl">1</span><span class="op">:</span><span class="fu">lastindex</span>(whale)<span class="op">-</span><span class="fl">1</span>) <span class="op">|&gt;</span> permutedims</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="27">
<pre><code>1×8 reshape(view(::Vector{Int64}, 2:9), 1, 8) with eltype Int64:
 122  235  111  292  111  211  133  156</code></pre>
</div>
</div>
</section>
</section>
<section id="assignment" class="level3" data-number="2.1.4">
<h3 data-number="2.1.4" class="anchored" data-anchor-id="assignment"><span class="header-section-number">2.1.4</span> Assignment</h3>
<p>The assignment</p>
<div class="cell" data-execution_count="27">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>whale <span class="op">=</span> [<span class="fl">74</span>, <span class="fl">122</span>, <span class="fl">235</span>, <span class="fl">111</span>, <span class="fl">292</span>, <span class="fl">111</span>, <span class="fl">211</span>, <span class="fl">133</span>, <span class="fl">156</span>, <span class="fl">79</span>]</span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>whale <span class="op">|&gt;</span> permutedims</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="28">
<pre><code>1×10 Matrix{Int64}:
 74  122  235  111  292  111  211  133  156  79</code></pre>
</div>
</div>
<p>binds the name <code>whale</code> to the <em>container</em> holding the <span class="math inline">\(10\)</span> numbers.</p>
<p>If we make another assignment, as in</p>
<div class="cell" data-execution_count="28">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>whale_copy <span class="op">=</span> whale</span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>whale_copy  <span class="op">|&gt;</span> permutedims</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="29">
<pre><code>1×10 Matrix{Int64}:
 74  122  235  111  292  111  211  133  156  79</code></pre>
</div>
</div>
<p>the container is copied, but – unlike if we had used <code>copy(whale)</code> – the two variables point to the same container. When a vector is passed into a function, the function works with the container, not a copy.</p>
<p>The values in the container may be reassigned, which is done by using the indexing notation on the left-hand side of the equals sign:</p>
<div class="cell" data-execution_count="29">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>whale[<span class="fl">1</span>] <span class="op">=</span> <span class="fl">75</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="30">
<pre><code>75</code></pre>
</div>
</div>
<p>The value <code>75</code> is returned, as the <em>right-hand</em> side of an assignment is always the returned value, but we can see that <code>whale</code> was modified:</p>
<div class="cell" data-execution_count="30">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>whale[<span class="fl">1</span>], whale_copy[<span class="fl">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="31">
<pre><code>(75, 75)</code></pre>
</div>
</div>
<p>We also see that as <code>whale_copy</code> points to the same container, it too was modified.</p>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Mutation
</div>
</div>
<div class="callout-body-container callout-body">
<p>When a vector is passed to a function, if there is no copy made (as opposed to a simple naming), then changes to the vector in the function will effect the original vector as the container used in the body of the function isn’t changed. Functions which <em>modify</em> an argument that is passed to them (conventionally the first one) are <em>usually</em> named with a trailing <code>!</code>.</p>
</div>
</div>
<p>Multiple values can be assigned at once. For example, if the data was mis-arranged chronologically, we might have:</p>
<div class="cell" data-execution_count="31">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>whale[[<span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">3</span>]] <span class="op">=</span> [<span class="fl">235</span>, <span class="fl">74</span>, <span class="fl">122</span>]</span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a>whale <span class="op">|&gt;</span> permutedims</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="32">
<pre><code>1×10 Matrix{Int64}:
 235  74  122  111  292  111  211  133  156  79</code></pre>
</div>
</div>
<p>The above modified the original container, so these changes would also be reflected in <code>whale_copy</code>.</p>
<p><code>Julia</code> does not recycle by default, but <em>broadcasted assignment</em> (cf.&nbsp;<code>?.=</code>) can produce a similar behavior. Broadcasted assignment expands the right hand side and then does in-place assignment. For example, if we wanted to use a sentinel value to indicate unknown data for the first 3 values, we might have:</p>
<div class="cell" data-execution_count="32">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>whale[[<span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">3</span>]] <span class="op">.=</span> <span class="fl">999</span></span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>whale <span class="op">|&gt;</span> permutedims</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="33">
<pre><code>1×10 Matrix{Int64}:
 999  999  999  111  292  111  211  133  156  79</code></pre>
</div>
</div>
<p>Notice, without the dot an error will be thrown</p>
<div class="cell" data-execution_count="33">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>whale[[<span class="fl">4</span>,<span class="fl">5</span>,<span class="fl">6</span>]] <span class="op">=</span> <span class="fl">999</span>  <span class="co"># errors</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>LoadError: ArgumentError: indexed assignment with a single value to possibly many locations is not supported; perhaps use broadcasting `.=` instead?</code></pre>
</div>
</div>
<p>The “recycling” above uses the left-hand side to identify the size needed. Broadcasted assignment also works with the entire collection. For example, the following command replaces the current data with the original data:</p>
<div class="cell" data-execution_count="34">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>whale <span class="op">.=</span> [<span class="fl">74</span>, <span class="fl">122</span>, <span class="fl">235</span>, <span class="fl">111</span>, <span class="fl">292</span>, <span class="fl">111</span>, <span class="fl">211</span>, <span class="fl">133</span>, <span class="fl">156</span>, <span class="fl">79</span>]</span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a>whale <span class="op">|&gt;</span> permutedims</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="35">
<pre><code>1×10 Matrix{Int64}:
 74  122  235  111  292  111  211  133  156  79</code></pre>
</div>
</div>
<p>But <code>whale</code> is not a new object – as it would be without that dot – but rather, these values are placed into the container <code>whale</code> already refers to – which also is the container <code>whale_copy</code> points at:</p>
<div class="cell" data-execution_count="35">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>whale_copy  <span class="op">|&gt;</span> permutedims</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="36">
<pre><code>1×10 Matrix{Int64}:
 74  122  235  111  292  111  211  133  156  79</code></pre>
</div>
</div>
<p>This assignment avoids the needed allocation of more memory.</p>
<!-- https://discourse.julialang.org/t/what-is-the-difference-between-and-indexing-in-dataframes-with-unitful/90498/6 -->
<p>The use of <code>[:]</code> on the <em>left-hand side</em> also does in-place assignment<a href="#fn8" class="footnote-ref" id="fnref8" role="doc-noteref"><sup>8</sup></a>. So unlike <code>whale = [...]</code> which <em>replaces</em> the container <code>whale</code> points at, this command reuses the container:</p>
<div class="cell" data-execution_count="36">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a>whale[<span class="op">:</span>] <span class="op">=</span> [<span class="fl">74</span>, <span class="fl">122</span>, <span class="fl">235</span>, <span class="fl">111</span>, <span class="fl">292</span>, <span class="fl">111</span>, <span class="fl">211</span>, <span class="fl">133</span>, <span class="fl">156</span>, <span class="fl">79</span>]  <span class="op">|&gt;</span> permutedims</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="37">
<pre><code>1×10 Matrix{Int64}:
 74  122  235  111  292  111  211  133  156  79</code></pre>
</div>
</div>
<table class="table">
<caption>Various uses of indexing by numeric indices.</caption>
<colgroup>
<col style="width: 35%">
<col style="width: 65%">
</colgroup>
<thead>
<tr class="header">
<th>Index style</th>
<th>Explanation</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>x[1]</code></td>
<td>The first element of <code>x</code>.</td>
</tr>
<tr class="even">
<td><code>x[:]</code></td>
<td>Copy of all elements of <code>x</code>.</td>
</tr>
<tr class="odd">
<td><code>x[end]</code></td>
<td>The last element of <code>x</code>.</td>
</tr>
<tr class="even">
<td><code>x[first]</code></td>
<td>The first element of <code>x</code>.</td>
</tr>
<tr class="odd">
<td><code>x[[2,3]]</code></td>
<td>The second and third elements of <code>x</code>.</td>
</tr>
<tr class="even">
<td><code>typeof(x)[]</code></td>
<td><span class="math inline">\(0\)</span>-length vector of same type as <code>x</code>.</td>
</tr>
<tr class="odd">
<td><code>eltype(x)</code></td>
<td>Element type of container <code>x</code>.</td>
</tr>
<tr class="even">
<td><code>x[1] .= 5</code></td>
<td>Assign a value of 5 to first element of <code>x</code>.</td>
</tr>
<tr class="odd">
<td><code>x[[2,3]] .= 4</code></td>
<td>Broadcasted assignment to second and third elements</td>
</tr>
<tr class="even">
<td><code>x[[2,3]] = [4,5]</code></td>
<td>Assign values to second and third elements of <code>x</code>.</td>
</tr>
<tr class="odd">
<td><code>x[:] = [1, 2, 3]</code></td>
<td>In-place assignment. Size <em>and type</em> of right-hand side must match left-hand side</td>
</tr>
</tbody>
</table>
<section id="vector-size" class="level4">
<h4 class="anchored" data-anchor-id="vector-size">Vector size</h4>
<p>A vector has a length which can not be changed during assignment. Attempting to assign to an index beyond the size will result in a <code>BoundsError</code>. To extend the size of a vector we can use the following generic functions:</p>
<ul>
<li><code>push!(v, x)</code>: extend the vector <code>v</code> pushing <code>x</code> to the <em>last</em> value</li>
<li><code>pushfirst!(v, x)</code>: extend the vector <code>v</code> pushing <code>x</code> to the <em>first</em> value</li>
<li><code>append!(v, v1)</code>: append the entries in <code>v1</code> to the end of <code>v</code></li>
<li><code>vcat(v, v1)</code>: <strong>v</strong>ertically con<strong>cat</strong>enate <code>v</code> and <code>v1</code>. (Unlike <code>append!</code> this returns a new vector, so the type of the output will be recomputed).</li>
</ul>
<p>The vector can also be shrunk. These generic functions for containers are useful:</p>
<ul>
<li><code>pop!(v)</code>: remove <em>last</em> element from a vector; return element</li>
<li><code>popfirst!(v)</code>: remove <em>first</em> element from a vector; return element</li>
<li><code>deleteat!(v, i)</code>: remove <em>i</em>the element from a vector; returns vector</li>
<li><code>empty!(v)</code>: remove <em>all</em> elements from a vector</li>
</ul>
<p>Again, the trailing <code>!</code> in a function name is a convention to indicate to the user that the function will mutate its arguments, conventionally its first one. That is, a function like <code>pop!(v)</code> does two things: it returns the last element and <em>also</em> shortens the vector <code>v</code> that is passed in.</p>
</section>
<section id="vectors-have-an-element-type" class="level4">
<h4 class="anchored" data-anchor-id="vectors-have-an-element-type">Vectors have an element type</h4>
<p>The assignment <code>whale = [74, 122, 235, ...]</code> assigns a container of a <em>specific</em> type to the variable <code>whale</code>. The <code>eltype(whale)</code> command will return this element type. Subsequent assignments to this container must contain values that can be <em>promoted</em> to that type, otherwise an error will be thrown.</p>
<p>For example, we can’t assign a fractional number of whales:</p>
<div class="cell" data-execution_count="37">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a>whale[<span class="fl">1</span>] <span class="op">=</span> <span class="fl">74.5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>LoadError: InexactError: Int64(74.5)</code></pre>
</div>
</div>
<p>An <code>InexactError</code> is thrown because, <code>whale</code> is a vector of integers, and <code>74.5</code> can’t be automatically promoted to an integer (as <code>74.0</code> could be).</p>
<p>A similar thing happens if we attempt to assign <code>missing</code> to a value, as in <code>whale[1] = missing</code>. In this case, a <code>MethodError</code> is thrown, which comes from the attempt to “<code>convert</code>” <code>missing</code> into the underlying integer type.</p>
<p>The way to fix this is to create a new container that allows a wider type. For <code>Float64</code> values that can be achieved in the cumbersome manner of converting all the values to the wider type:</p>
<div class="cell" data-execution_count="38">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a>whale <span class="op">=</span> <span class="fu">convert</span>(<span class="dt">Vector</span>{<span class="dt">Float64</span>}, whale)</span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a>whale[<span class="fl">1</span>] <span class="op">=</span> <span class="fl">74.5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="39">
<pre><code>74.5</code></pre>
</div>
</div>
<p>This assigns <code>whale</code> to a <em>new</em> container which accepts floating point values, and then reassigns the first one.</p>
<p>Though cumbersome, this is not typical usage, as the constructor used to create the data set will promote to a common type, so it would only matter when adjusting the initial values.</p>
<p>For the special case of assigning a <em>missing</em> value, the <code>allowmissing</code> function from the <code>DataFrames</code> package<a href="#fn9" class="footnote-ref" id="fnref9" role="doc-noteref"><sup>9</sup></a> creates a vector with a type that allows – as well – missing values<a href="#fn10" class="footnote-ref" id="fnref10" role="doc-noteref"><sup>10</sup></a>. Again, re-assignment is necessary:</p>
<div class="cell" data-execution_count="39">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">DataFrames</span></span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a>whale <span class="op">=</span> <span class="fu">allowmissing</span>(whale)</span>
<span id="cb79-3"><a href="#cb79-3" aria-hidden="true" tabindex="-1"></a>whale[<span class="fl">1</span>] <span class="op">=</span> <span class="cn">missing</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="40">
<pre><code>missing</code></pre>
</div>
</div>
</section>
<section id="broadcasting" class="level4">
<h4 class="anchored" data-anchor-id="broadcasting">Broadcasting</h4>
<p>As seen, the functions <code>length</code> and <code>sum</code> are reductions, returning a single number from a vector of numbers. To compute a <em>sample standard deviation</em>, say, we follow the formula:</p>
<p><span class="math display">\[
s = \sqrt{\frac{\sum_i (x_i - \bar{x})^2 }{n-1}}.
\]</span></p>
<p>To do so we would need to:</p>
<ul>
<li>Subtract a scalar value from from each element of the data vector: (<span class="math inline">\(x_i - \bar{x}\)</span>).</li>
<li>Apply the squaring function to each element of this difference.</li>
<li>Reduce the resulting data to a number through <code>sum</code>.</li>
</ul>
<p>Embarking on this with a simple attempt: <code>whale - mean(whale)</code> will fail.</p>
<p>The subtraction of a scalar value from a vector value is not defined, as <code>Julia</code> is not implicitly vectorized. Rather the user must be explicit. For this, the concept of broadcasting is useful. Broadcasting will expand the scalar to match the size of the vector and then use vector subtraction to find the result. Broadcasting is done simply by adding a “.” (the dot) to the function. For infix operations like <code>-</code> this is <em>before</em> the operator:</p>
<div class="cell" data-execution_count="40">
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a>whale <span class="op">=</span> [<span class="fl">74</span>, <span class="fl">122</span>, <span class="fl">235</span>, <span class="fl">111</span>, <span class="fl">292</span>, <span class="fl">111</span>, <span class="fl">211</span>, <span class="fl">133</span>, <span class="fl">156</span>, <span class="fl">79</span>]</span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a>whale <span class="op">.-</span> <span class="fu">mean</span>(whale)  <span class="op">|&gt;</span> permutedims</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="41">
<pre><code>1×10 Matrix{Float64}:
 -78.4  -30.4  82.6  -41.4  139.6  -41.4  58.6  -19.4  3.6  -73.4</code></pre>
</div>
</div>
<p>We also would need to square these values. This could <em>also</em> be done by broadcasting <code>^</code>, as in:</p>
<div class="cell" data-execution_count="41">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a>(whale <span class="op">.-</span> <span class="fu">mean</span>(whale))<span class="op">.^</span><span class="fl">2</span>  <span class="op">|&gt;</span> permutedims</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="42">
<pre><code>1×10 Matrix{Float64}:
 6146.56  924.16  6822.76  1713.96  …  3433.96  376.36  12.96  5387.56</code></pre>
</div>
</div>
<p>To avoid having to use <em>too</em> many dots, it is typical to define a function for doing a scalar computation and broadcast that<a href="#fn11" class="footnote-ref" id="fnref11" role="doc-noteref"><sup>11</sup></a>. An example will wait, but to illustrate the syntax, we can broadcast the <code>sqrt</code> function using a “.” after the function name and before the opening parentheses:</p>
<div class="cell" data-execution_count="42">
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sqrt</span>.(whale)  <span class="op">|&gt;</span> permutedims</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="43">
<pre><code>1×10 Matrix{Float64}:
 8.60233  11.0454  15.3297  10.5357  …  14.5258  11.5326  12.49  8.88819</code></pre>
</div>
</div>
<p>Broadcasting works with functions of multiple arguments and multiple shapes.</p>
<p>The use of multiple shapes allows scalars and vectors to be broadcast over and is used in <code>whale .- mean(whale)</code>. But vector and <em>row</em> vectors can also be broadcast over, So <code>[1,2] .+ [3,4]</code> does vector addition, <code>[1,2] .+ [3 4]</code> pads out the vector to a matrix, the row vector to a matrix, then adds:</p>
<div class="cell" data-execution_count="43">
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a>(v<span class="op">=</span>[<span class="fl">1</span>,<span class="fl">2</span>], rv<span class="op">=</span>[<span class="fl">3</span> <span class="fl">4</span>], va <span class="op">=</span> [<span class="fl">1</span>,<span class="fl">2</span>] <span class="op">.+</span> [<span class="fl">3</span>,<span class="fl">4</span>], ma <span class="op">=</span> [<span class="fl">1</span>, <span class="fl">2</span>] <span class="op">.+</span> [<span class="fl">3</span> <span class="fl">4</span>], ck<span class="op">=</span>[<span class="fl">1</span> <span class="fl">1</span>; <span class="fl">2</span> <span class="fl">2</span>] <span class="op">+</span> [<span class="fl">3</span> <span class="fl">4</span>; <span class="fl">3</span> <span class="fl">4</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="44">
<pre><code>(v = [1, 2], rv = [3 4], va = [4, 6], ma = [4 5; 5 6], ck = [4 5; 5 6])</code></pre>
</div>
</div>
<p>This behavior may not be desirable. Some objects broadcast as scalars, others as containers. But there may be times where broadcasting as a container may be incorrect. To force a value to broadcast like a scalar, the value can be wrapped in <code>Ref</code>. That is <code>mean(whale)</code> is the same as <code>mean.(Ref(whale))</code> <em>but</em> <code>mean.(whale)</code> would broadcast <code>mean</code> over each element in <code>whale</code>. As <code>mean</code> for a single number is just that number, <code>mean.(whale)</code> would just be the same container.</p>
</section>
</section>
</section>
<section id="sec-data-types" class="level2" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="sec-data-types"><span class="header-section-number">2.2</span> Data types</h2>
<p>An old <a href="https://en.wikipedia.org/wiki/Statistical_data_type">taxonomy</a> of levels of measurement include nominal, ordinal, interval, and ratio; where nominal values have no rank, ordinal values have a rank, but no meaning is assigned to the different between values, interval data has a meaning between differences but <span class="math inline">\(0\)</span> is arbitrary, and ration has a meaningful zero, such as most numeric data. As data can easily be coded (explicitly or behind the scenes) with numbers, this keeps the different types distinct. However, for use with the computer, in particular <code>Julia</code> here, we see it makes more sense to emphasize different aspects of the data related to the underlying type.</p>
<p><code>Julia</code> has numerous data types. Some are “abstract” types, such as <code>Real</code> or <code>Integer</code>, others are “concrete”, often indicating how the data is stored, such as <code>Float64</code> or <code>Int64</code>, with the “<code>64</code>” indicating <span class="math inline">\(64\)</span> bits of memory. In <code>Julia</code>, these data types can be used to direct method dispatch. For statistics a few common types are used to represent data. These are reviewed in the following.</p>
<section id="sec-numeric-data-types" class="level3" data-number="2.2.1">
<h3 data-number="2.2.1" class="anchored" data-anchor-id="sec-numeric-data-types"><span class="header-section-number">2.2.1</span> Numeric data types</h3>
<p>The <code>Julia</code> parser readily identifies the following values of <span class="math inline">\(1\)</span> and stores the value using a different type:</p>
<div class="cell" data-execution_count="44">
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="fl">1</span>, <span class="fl">1.0</span>, <span class="fl">1</span><span class="op">//</span><span class="fl">1</span>, <span class="fl">1</span> <span class="op">+</span> <span class="fl">0im</span>, <span class="fu">big</span>(<span class="fl">1</span>), <span class="fu">BigFloat</span>(<span class="fl">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="45">
<pre><code>(1, 1.0, 1//1, 1 + 0im, 1, 1.0)</code></pre>
</div>
</div>
<p>Respectively, these represent integer, floating point, rational, complex, and two types of “big” numbers. <code>Julia</code> uses a promotion machinery when different types are mixed. For example, we have:</p>
<div class="cell" data-execution_count="45">
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> <span class="fl">1</span> <span class="op">+</span> <span class="fl">1.0</span> <span class="op">+</span> <span class="fl">1</span><span class="op">//</span><span class="fl">1</span> <span class="op">+</span> <span class="fl">1</span> <span class="op">+</span> <span class="fl">0im</span> <span class="op">+</span> <span class="fu">big</span>(<span class="fl">1</span>) <span class="op">+</span> <span class="fu">BigFloat</span>(<span class="fl">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="46">
<pre><code>6.0 + 0.0im</code></pre>
</div>
</div>
<p>The type of <code>x</code> must be both complex and be able to store the underlying numbers, which may be “big” numbers:</p>
<div class="cell" data-execution_count="46">
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="47">
<pre><code>Complex{BigFloat}</code></pre>
</div>
</div>
<p>The above illustrates that addition of an integer and a floating point yields a floating point, and adding to a complex number returns a complex number, etc.</p>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Type stability
</div>
</div>
<div class="callout-body-container callout-body">
<p><code>Julia</code> programmers try to make functions “type stable,” if possible, as this generally leads to more performant code once compiled. A consequence is addition of numbers, like <code>1 + 1.0</code> will <em>always</em> be a floating point value, even if in the case of these particular <em>values</em> an integer could be the answer. That is the output type of <code>+</code> here is determined by the input <em>types</em>, not the input <em>values</em>.</p>
</div>
</div>
<p>For data consisting of counts, integers are typically used. If storage is an issue (e.g., lots of data, but not a lot of different values), different forms of integers which use less data may be used.</p>
<p>For data on measurements, with a continuous nature, floating point values are the natural choice. Floating point can represent most integer values exactly, and fractional and irrational values either exactly or approximately. Rational numbers can represent fractional data exactly, though it should be expected that operations with rational values are less performant than for floating point values.</p>
<p>Complex values in <code>Julia</code> are based on an underlying data type holding the two numbers in <code>a + bi</code>.</p>
</section>
<section id="sec-categ-data-types" class="level3" data-number="2.2.2">
<h3 data-number="2.2.2" class="anchored" data-anchor-id="sec-categ-data-types"><span class="header-section-number">2.2.2</span> Categorical data types</h3>
<p>There are different options available for the storage of categorical data.</p>
<section id="character-data" class="level4">
<h4 class="anchored" data-anchor-id="character-data">Character data</h4>
<p>The <code>String</code> type in <code>Julia</code> is the basic type for holding character data. Strings are created with matching single quotes <em>or</em> – for multiline strings – with matching triple quotes:</p>
<div class="cell" data-execution_count="47">
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a>s <span class="op">=</span> <span class="st">"The quick brown fox ..."</span></span>
<span id="cb95-2"><a href="#cb95-2" aria-hidden="true" tabindex="-1"></a>t <span class="op">=</span> <span class="st">"""</span></span>
<span id="cb95-3"><a href="#cb95-3" aria-hidden="true" tabindex="-1"></a><span class="st">Four score and seven years ago</span></span>
<span id="cb95-4"><a href="#cb95-4" aria-hidden="true" tabindex="-1"></a><span class="st">our fathers brought forth...</span></span>
<span id="cb95-5"><a href="#cb95-5" aria-hidden="true" tabindex="-1"></a><span class="st">"""</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="48">
<pre><code>"Four score and seven years ago\nour fathers brought forth...\n"</code></pre>
</div>
</div>
<p>The string type in <code>Julia</code> can hold Unicode data, such as non-ASCII letters and even emojis.</p>
<p>Double quotes are used to create a string. Triple quotes can be used to create multi-line strings. Single quotes are for <code>Char</code> types. A character represents a Unicode code point. Strings are iterable, and iteration yields back <code>Char</code> values. The <code>collect</code> function iterates over an object and returns the values. Here we see the <code>Char</code>s in a string:</p>
<div class="cell" data-execution_count="48">
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a>s <span class="op">=</span> <span class="st">"Zoë"</span></span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true" tabindex="-1"></a><span class="fu">collect</span>(s)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="49">
<pre><code>3-element Vector{Char}:
 'Z': ASCII/Unicode U+005A (category Lu: Letter, uppercase)
 'o': ASCII/Unicode U+006F (category Ll: Letter, lowercase)
 'ë': Unicode U+00EB (category Ll: Letter, lowercase)</code></pre>
</div>
</div>
<p>Strings are also indexable. When indexed by a single value, a <code>Char</code> type is returned, when indexed by a range of a values a string is returned. Be warned, indexing into non-ascii strings may error. Here is an example using a string from <code>Julia</code>’s manual:</p>
<div class="cell" data-execution_count="49">
<div class="sourceCode cell-code" id="cb99"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a>j <span class="op">=</span> <span class="st">"jμΛIα"</span></span>
<span id="cb99-2"><a href="#cb99-2" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(j), j[<span class="fl">2</span>], j[<span class="fl">2</span><span class="op">:</span><span class="fl">4</span>]  <span class="co"># 2:4 represent the value 2,3,4</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="50">
<pre><code>(5, 'μ', "μΛ")</code></pre>
</div>
</div>
<p>The value returned by <code>j[2]</code> is a character, whereas that returned by <code>j[2:4]</code> is a string<a href="#fn12" class="footnote-ref" id="fnref12" role="doc-noteref"><sup>12</sup></a>. However, attempting to extract <code>j[3]</code> will be an error.</p>
</section>
<section id="string-operations" class="level4">
<h4 class="anchored" data-anchor-id="string-operations">String operations</h4>
<p>Strings can be combined many different ways.</p>
<p>The <code>*</code> operation is used to combine strings or chars. The basic usage is straight forward:</p>
<div class="cell" data-execution_count="50">
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="st">"a"</span> <span class="op">*</span> <span class="st">"bee"</span> <span class="op">*</span> <span class="st">"see"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="51">
<pre><code>"abeesee"</code></pre>
</div>
</div>
<p>The <code>^</code> operation when used with an integer exponent will repeat the argument:<a href="#fn13" class="footnote-ref" id="fnref13" role="doc-noteref"><sup>13</sup></a></p>
<div class="cell" data-execution_count="51">
<div class="sourceCode cell-code" id="cb103"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="st">"dot "</span><span class="op">^</span><span class="fl">3</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="52">
<pre><code>"dot dot dot "</code></pre>
</div>
</div>
<p>More generally, <code>join</code> will combine an <em>iterable</em> of strings or characters. If a delimiter is specified, it will be inserted between values (with an option to indicate the last delimiter differently):</p>
<div class="cell" data-execution_count="52">
<div class="sourceCode cell-code" id="cb105"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a>j <span class="op">=</span> <span class="st">"jμΛIα"</span></span>
<span id="cb105-2"><a href="#cb105-2" aria-hidden="true" tabindex="-1"></a><span class="fu">join</span>(<span class="fu">collect</span>(j), <span class="st">","</span>), <span class="fu">join</span>(<span class="fu">collect</span>(j), <span class="st">", "</span>, <span class="st">", and "</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="53">
<pre><code>("j,μ,Λ,I,α", "j, μ, Λ, I, and α")</code></pre>
</div>
</div>
<p><code>Julia</code> makes string <em>interpolation</em> easy. Within a string, a value of a variable can be inserted using a dollar sign to reference the variable. This is more general, as computations can also be inserted. Below parentheses are used to delimit the interpolated command:</p>
<div class="cell" data-execution_count="53">
<div class="sourceCode cell-code" id="cb107"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> <span class="st">"Alice"</span></span>
<span id="cb107-2"><a href="#cb107-2" aria-hidden="true" tabindex="-1"></a><span class="st">"</span><span class="sc">$</span>x<span class="st"> knows that 2 + 2 is equal to </span><span class="sc">$</span>(<span class="fl">2</span><span class="op">+</span><span class="fl">2</span>)<span class="st">"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="54">
<pre><code>"Alice knows that 2 + 2 is equal to 4"</code></pre>
</div>
</div>
<p>(To include a dollar sign in the string, it can be escape with a leading slash, “<code>\</code>”, or a <code>raw</code> string can be used, as in <code>raw"$(2+2) is not evaluated"</code>.)</p>
<p>For <em>formatted</em> values, such as needed when printing floating point values, the built-in <code>Printf</code> package provides support. For more performant solutions, an <code>IOBuffer</code> can be useful<a href="#fn14" class="footnote-ref" id="fnref14" role="doc-noteref"><sup>14</sup></a>.</p>
<p>A common means to generate strings is from reading in delimited files, such as comma-separated files. These may produce strings with leading or trailing spaces. To strip these off, <code>Julia</code> offers <code>strip</code>, <code>lstrip</code>, and <code>rstrip</code>. The <code>lstrip</code> function strops the left side, <code>rstrip</code> the right side, and <code>strip</code> combines the two. An option to pass in other characters to strip besides spaces is available.</p>
<div class="cell" data-execution_count="54">
<div class="sourceCode cell-code" id="cb109"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="fu">strip</span>(<span class="st">"   abc    "</span>),  <span class="fu">strip</span>(<span class="st">"...abc..."</span>, <span class="ch">'.'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="55">
<pre><code>("abc", "abc")</code></pre>
</div>
</div>
<hr>
<p>Discussing data sets for different type of data adds no more complication as vectors in <code>Julia</code> are typed so a data set of character data might simply be stored as a vector of string data, such as:</p>
<div class="cell" data-execution_count="55">
<div class="sourceCode cell-code" id="cb111"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a>job_title <span class="op">=</span> [<span class="st">"Data Scientist"</span>, <span class="st">"Machine Learning Scientist"</span>, <span class="st">"Big Data Engineer"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="56">
<pre><code>3-element Vector{String}:
 "Data Scientist"
 "Machine Learning Scientist"
 "Big Data Engineer"</code></pre>
</div>
</div>
</section>
<section id="symbols" class="level4">
<h4 class="anchored" data-anchor-id="symbols">Symbols</h4>
<p><code>Julia</code> as a language can be used to represent the language’s code as a data structure in the <a href="https://stackoverflow.com/questions/23480722/what-is-a-symbol-in-julia">language</a>. Symbols are needed to refer to the name, or identifier, of a variable as opposed to the values in the variable. Symbols, being part of the language, are used for other purposes, such as keys for a named tuple. The access pattern <code>nt.a</code> has been mentioned; this is a convenience for <code>getfield(nt, :a)</code>, the symbol being used as a key. When data frames are introduced – essentially a collection of matched data vectors – symbols can be used to reference the individual variables.</p>
<p>The simple constructor for a symbol is <code>:</code>, as in <code>:some_symbol</code>. The <code>Symbol</code> constructor can also be used to create symbols with spaces, e.g., <code>Symbol("some symbol")</code>; the string macro <code>var"..."</code> is a convenience.</p>
<p>The <code>string</code> function (or <code>String</code> constructor) will create a string from a symbol.</p>
</section>
<section id="factors" class="level4">
<h4 class="anchored" data-anchor-id="factors">Factors</h4>
<p>While character data is useful for representing data that is unique to each case (like an individual’s address), there are advantages to using a different representation for data with many anticipated repeated values (like an individual’s state). Factors are a data structure that allow the user to see full labels, but internally, the computer only sees an efficient pool of possible levels or values. That is, a factor is essentially a mapping between a label and a corresponding key, with a possible ordering assigned to the labels.</p>
<p>Factors are not a built-in data type, but are provided by the <code>CategoricalArrays</code> package, which is loaded as other packages are:</p>
<div class="sourceCode cell-code" id="cb113"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">CategoricalArrays</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>We use an example from the package’s documentation:</p>
<p>We use an example based on coffee sizes at your neighborhood Starbucks. An order consisted of <span class="math inline">\(4\)</span> drinks with these sizes, put into a categorical array:</p>
<div class="cell" data-execution_count="57">
<div class="sourceCode cell-code" id="cb114"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> <span class="fu">categorical</span>([<span class="st">"Grande"</span>, <span class="st">"Venti"</span>, <span class="st">"Tall"</span>, <span class="st">"Venti"</span>], ordered<span class="op">=</span><span class="cn">true</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="58">
<pre><code>4-element CategoricalArray{String,1,UInt32}:
 "Grande"
 "Venti"
 "Tall"
 "Venti"</code></pre>
</div>
</div>
<p>This appears to be like a character vector, but the type is different. First, let’s peek to see how values are internally stored. The user-visible values are stored with:</p>
<div class="cell" data-execution_count="58">
<div class="sourceCode cell-code" id="cb116"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb116-1"><a href="#cb116-1" aria-hidden="true" tabindex="-1"></a>x.pool</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="59">
<pre><code>CategoricalPool{String, UInt32}(["Grande", "Tall", "Venti"]) with ordered levels</code></pre>
</div>
</div>
<p>Internally, the computer sees:</p>
<div class="cell" data-execution_count="59">
<div class="sourceCode cell-code" id="cb118"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb118-1"><a href="#cb118-1" aria-hidden="true" tabindex="-1"></a>x.refs</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="60">
<pre><code>4-element Vector{UInt32}:
 0x00000001
 0x00000003
 0x00000002
 0x00000003</code></pre>
</div>
</div>
<p>The levels are the labels assigned to the internal values. We can see that the levels are internally kept as 32-bit integers, which in general is more space efficient than storing the labels. The command <code>levelcode.(x)</code> will show the values using the more readable 64-bit integers.</p>
<p>Working with levels is the key difference. First levels, may be <em>ordered</em> either by specifying <code>ordered=true</code> to the constructor <em>or</em> by calling <code>ordered!(x, true)</code>. The example data has an odd order (call <code>levels(x)</code> to see), it coming from lexical sorting. So <code>Grande</code> is before <code>Venti</code>, despite the latter being 16 oz. and the former 20 oz (for hot drinks, 24oz for cold)<a href="#fn15" class="footnote-ref" id="fnref15" role="doc-noteref"><sup>15</sup></a>.</p>
<div class="cell" data-execution_count="60">
<div class="sourceCode cell-code" id="cb120"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb120-1"><a href="#cb120-1" aria-hidden="true" tabindex="-1"></a>x[<span class="fl">1</span>] <span class="op">&lt;</span> x[<span class="fl">2</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="61">
<pre><code>true</code></pre>
</div>
</div>
<p>To reorder, we call the <code>levels!</code> function with the desired order:</p>
<div class="cell" data-execution_count="61">
<div class="sourceCode cell-code" id="cb122"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb122-1"><a href="#cb122-1" aria-hidden="true" tabindex="-1"></a><span class="fu">levels!</span>(x, [<span class="st">"Tall"</span>, <span class="st">"Venti"</span>, <span class="st">"Grande"</span>])</span>
<span id="cb122-2"><a href="#cb122-2" aria-hidden="true" tabindex="-1"></a>x[<span class="fl">1</span>] <span class="op">&gt;</span> x[<span class="fl">2</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="62">
<pre><code>true</code></pre>
</div>
</div>
<p>The levels can be extended through assignment. For example, we might prefer the label “Tall, 12oz” to “Tall” and can readily do this:</p>
<div class="cell" data-execution_count="62">
<div class="sourceCode cell-code" id="cb124"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb124-1"><a href="#cb124-1" aria-hidden="true" tabindex="-1"></a>x[<span class="fl">3</span>] <span class="op">=</span> <span class="st">"Tall, 12oz"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="63">
<pre><code>"Tall, 12oz"</code></pre>
</div>
</div>
<p>After this command, there are 4 levels though only 3 used in the vector. To trim out extra levels, the <code>droplevels!</code> function can be used.</p>
<p>For multiple replacements, the <code>replace</code> function is useful and the levels are adjusted accordingly:</p>
<div class="cell" data-execution_count="63">
<div class="sourceCode cell-code" id="cb126"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb126-1"><a href="#cb126-1" aria-hidden="true" tabindex="-1"></a><span class="fu">replace</span>(x, <span class="st">"Grande"</span> <span class="op">=&gt;</span> <span class="st">"Grande, 20oz"</span>, <span class="st">"Venti"</span> <span class="op">=&gt;</span> <span class="st">"Venti, 16oz"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="64">
<pre><code>4-element CategoricalArray{String,1,UInt32}:
 "Grande, 20oz"
 "Venti, 16oz"
 "Tall, 12oz"
 "Venti, 16oz"</code></pre>
</div>
</div>
<p>Categorical data can be combined, with <code>vcat</code>, say, and if ordered, as much as possible, an order will attempt to be matched.</p>
</section>
</section>
<section id="sec-logical-data" class="level3" data-number="2.2.3">
<h3 data-number="2.2.3" class="anchored" data-anchor-id="sec-logical-data"><span class="header-section-number">2.2.3</span> Logical data and operators</h3>
<p>The Boolean type in <code>Julia</code> has two values: <code>true</code> and <code>false</code>.</p>
<p>Boolean values have their own algebra. The <em>short-circuiting</em> <code>&amp;&amp;</code> and <code>||</code> implement “and” and “or:”</p>
<div class="cell" data-execution_count="64">
<div class="sourceCode cell-code" id="cb128"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb128-1"><a href="#cb128-1" aria-hidden="true" tabindex="-1"></a><span class="cn">false</span> <span class="op">&amp;&amp;</span> <span class="cn">false</span>, <span class="cn">true</span> <span class="op">&amp;&amp;</span> <span class="cn">false</span>, <span class="cn">false</span> <span class="op">&amp;&amp;</span> <span class="cn">true</span>, <span class="cn">true</span> <span class="op">&amp;&amp;</span> <span class="cn">true</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="65">
<pre><code>(false, false, false, true)</code></pre>
</div>
</div>
<div class="cell" data-execution_count="65">
<div class="sourceCode cell-code" id="cb130"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb130-1"><a href="#cb130-1" aria-hidden="true" tabindex="-1"></a><span class="cn">false</span> <span class="op">||</span> <span class="cn">false</span>, <span class="cn">true</span> <span class="op">||</span> <span class="cn">false</span>, <span class="cn">false</span> <span class="op">||</span> <span class="cn">true</span>, <span class="cn">true</span> <span class="op">||</span> <span class="cn">true</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="66">
<pre><code>(false, true, true, true)</code></pre>
</div>
</div>
<p>These are called “short circuiting,” as the right hand side is only evaluated if it need be (as in <code>true || false</code>, the statement is known to be true after the left side of <code>||</code> is evaluated, so the right hand side is not evaluated). This is used frequently for error messages, as the <code>error</code> is not called when the expression is true. These operations may be broadcasted, so the above might have been illustrated by <code>[true false] .&amp;&amp; [true, false]</code>. The operation have left-to-right associativity, so it is common to see them in a sequence.</p>
<p>Many operations promote these values to <code>1</code> and <code>0</code>. For example, <code>true + false</code> is <code>1</code>, <code>true * false</code> is <code>0</code>, and <code>sum([true,false, true])</code> is <code>2</code>; internally, the complex number <span class="math inline">\(i\)</span> is internally a pair <code>(false, true)</code> indicating no real part and an imaginary part.</p>
<p>Boolean values are returned by the <em>comparison operators</em> <code>&lt;</code>, <code>&lt;=</code>, <code>==</code>, <code>===</code>, <code>&gt;=</code>, and <code>&gt;</code>. These have the expected meaning, save <code>==</code> is a test of equality (not <code>=</code>, which is used for assignment) <em>and</em> <code>===</code> is a test of whether two values are <em>identical</em>. (E.g. for a vector <code>x</code> we have <code>x == copy(x)</code> is true, but <code>x === copy(x)</code> is false, as the latter does not point to the exact same container.) The symbol <code>!</code> is used for negation.</p>
<p>Boolean values can be used for <em>indexing</em>. Suppose <code>inds</code> is a vector of <code>true</code>s and <code>false</code>s with the <em>same</em> length as a vector <code>x</code>, then <code>x[inds]</code> will return those values from <code>x</code> where <code>inds</code> is <code>true</code>.</p>
<p>To create such Boolean vectors, the comparison operators are typically used <em>combined</em> with broadcasting. For example, the following redefines the <code>whale</code> dataset, then filters out only those values bigger than or equal to <span class="math inline">\(200\)</span>:</p>
<div class="cell" data-execution_count="66">
<div class="sourceCode cell-code" id="cb132"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb132-1"><a href="#cb132-1" aria-hidden="true" tabindex="-1"></a>whale <span class="op">=</span> [<span class="fl">74</span>, <span class="fl">122</span>, <span class="fl">235</span>, <span class="fl">111</span>, <span class="fl">292</span>, <span class="fl">111</span>, <span class="fl">211</span>, <span class="fl">133</span>, <span class="fl">156</span>, <span class="fl">79</span>]</span>
<span id="cb132-2"><a href="#cb132-2" aria-hidden="true" tabindex="-1"></a>whale[ whale <span class="op">.&gt;=</span> <span class="fl">200</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="67">
<pre><code>3-element Vector{Int64}:
 235
 292
 211</code></pre>
</div>
</div>
<p>Or, this example – which shows the mathematically natural chaining of comparison operators – filters out only the values in <span class="math inline">\([100, 125)\)</span>:</p>
<div class="cell" data-execution_count="67">
<div class="sourceCode cell-code" id="cb134"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb134-1"><a href="#cb134-1" aria-hidden="true" tabindex="-1"></a>whale[ <span class="fl">100</span> <span class="op">.&lt;=</span> whale <span class="op">.&lt;</span> <span class="fl">125</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="68">
<pre><code>3-element Vector{Int64}:
 122
 111
 111</code></pre>
</div>
</div>
<section id="querying-elements" class="level4">
<h4 class="anchored" data-anchor-id="querying-elements">Querying elements</h4>
<p>There are other helper functions to query the elements of a Boolean vector.</p>
<ul>
<li><code>any(v)</code> will return <code>true</code> if any of the elements of the Boolean vector <code>v</code> are <code>true</code>.</li>
<li><code>all(v)</code> will return <code>true</code> if all of the elements of the Boolean vector <code>v</code> are <code>true</code>.</li>
<li><code>findfirst(v)</code> will return the index of the <em>first</em> <code>true</code> value in the Boolean vector <code>v</code> or return <code>nothing</code> if none is found. A <em>predicate</em> function can be used, as in <code>findfirst(f, v)</code> which effectively calls <code>findfirst</code> on <code>f</code> applied to each element of <code>v</code>.</li>
<li><code>findlast(v)</code> will return the index of the <em>last</em> <code>true</code> value in the Boolean vector <code>v</code> or return <code>nothing</code> if none is found. A <em>predicate</em> function can be used, as in <code>findlast(f, v)</code> which effectively calls <code>findlast</code> on <code>f</code> applied to each element of <code>v</code>.</li>
<li><code>findnext(v, i)</code> will find the first <code>true</code> value after <em>index</em> <code>i</code> in the Boolean vector <code>v</code> or return <code>nothing</code> if none is found. A <em>predicate</em> function can be used, as in <code>findnext(f, v, i)</code> which effectively calls <code>findnext</code> on <code>f</code> applied to each element of <code>v</code>.</li>
</ul>
<p>In general, <code>x in v</code> will check if the element <code>x</code> is in the vector <code>v</code>. The Unicode operator <code>∈</code> can replace <code>in</code>.</p>
</section>
</section>
<section id="sec-date-time-types" class="level3" data-number="2.2.4">
<h3 data-number="2.2.4" class="anchored" data-anchor-id="sec-date-time-types"><span class="header-section-number">2.2.4</span> Date and time types</h3>
<p><code>Julia</code> provides the built-in <code>Dates</code> module for working with date and time data. This module need not be installed, but is not loaded by default, so loading or importing it is needed to access the functionality.</p>
<div class="sourceCode cell-code" id="cb136"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb136-1"><a href="#cb136-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">Dates</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Constructing a date is done with the <code>Date</code> constructor which expects a year, followed by an optional month and day. Date and time objects have the <code>DateTime</code> constructor. This example uses the vernal equinox, summer solstice, autumnal equinox, and winter solstice in the year 2022 for illustration:</p>
<div class="cell" data-execution_count="69">
<div class="sourceCode cell-code" id="cb137"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb137-1"><a href="#cb137-1" aria-hidden="true" tabindex="-1"></a>ve, ss, ae, ws <span class="op">=</span> <span class="fu">Date</span>(<span class="fl">2022</span>, <span class="fl">3</span>, <span class="fl">20</span>), <span class="fu">Date</span>(<span class="fl">2022</span>, <span class="fl">6</span>, <span class="fl">21</span>), <span class="fu">Date</span>(<span class="fl">2022</span>, <span class="fl">9</span>, <span class="fl">22</span>), <span class="fu">Date</span>(<span class="fl">2022</span>, <span class="fl">12</span>, <span class="fl">21</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="70">
<pre><code>(Date("2022-03-20"), Date("2022-06-21"), Date("2022-09-22"), Date("2022-12-21"))</code></pre>
</div>
</div>
<p>Dates can also be parsed from a string. The following uses the default format;<a href="#fn16" class="footnote-ref" id="fnref16" role="doc-noteref"><sup>16</sup></a>:</p>
<div class="cell" data-execution_count="70">
<div class="sourceCode cell-code" id="cb139"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb139-1"><a href="#cb139-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Date</span>.([<span class="st">"2022-03-20"</span>, <span class="st">"2022-06-21"</span>, <span class="st">"2022-09-22"</span>, <span class="st">"2022-12-21"</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="71">
<pre><code>4-element Vector{Date}:
 2022-03-20
 2022-06-21
 2022-09-22
 2022-12-21</code></pre>
</div>
</div>
<p>Date objects have the accessors <code>year</code>, <code>month</code>, and <code>day</code>:</p>
<div class="cell" data-execution_count="71">
<div class="sourceCode cell-code" id="cb141"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb141-1"><a href="#cb141-1" aria-hidden="true" tabindex="-1"></a><span class="fu">year</span>(ve), <span class="fu">month</span>(ve), <span class="fu">day</span>(ve)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="72">
<pre><code>(2022, 3, 20)</code></pre>
</div>
</div>
<p>The objects allow for natural operations, such as comparisons and differences:</p>
<div class="cell" data-execution_count="72">
<div class="sourceCode cell-code" id="cb143"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb143-1"><a href="#cb143-1" aria-hidden="true" tabindex="-1"></a>ve <span class="op">&lt;</span> ss <span class="op">&lt;</span> ae <span class="op">&lt;</span> ws, ae <span class="op">-</span> ve, ve <span class="op">+</span> <span class="fu">Day</span>(<span class="fl">93</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="73">
<pre><code>(true, Day(186), Date("2022-06-21"))</code></pre>
</div>
</div>
<p>The difference is returned in the number of days. The last command shows the duration of 93 days can be consteucted with <code>Day</code> and its value added to a <code>Date</code> object.</p>
<p>There are ways to query how a date falls within the calendar</p>
<div class="cell" data-execution_count="73">
<div class="sourceCode cell-code" id="cb145"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb145-1"><a href="#cb145-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dayofyear</span>(ve), <span class="fu">dayofweek</span>(ve), <span class="fu">dayname</span>(ve), <span class="fu">dayofweekofmonth</span>(ve)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="74">
<pre><code>(79, 7, "Sunday", 3)</code></pre>
</div>
</div>
<p>The last command returning that the vernal equinox in 2022 fell on the third Sunday of the month.</p>
</section>
<section id="structured-data" class="level3" data-number="2.2.5">
<h3 data-number="2.2.5" class="anchored" data-anchor-id="structured-data"><span class="header-section-number">2.2.5</span> Structured data</h3>
<p>Structured data may not represent statistical data, but is useful nonetheless, e.g, for specifying the year of the counts in the <code>whale</code> data set.</p>
<p>For a vector of all ones or all zeros, the <code>ones</code> and <code>zeros</code> functions are useful. The command <code>ones(n)</code> will return a vector of <code>n</code> zeros using the default <code>Float64</code> type. To specify a different type, such as <code>Int64</code>, the two-argument form, <code>ones(T, n)</code>, is available. Similarly, <code>zeros</code> is used to create a vector of zeros. The singular <code>one()</code>, <code>zero()</code> (one <code>one(T)</code> and <code>zero(T)</code>) are useful for generic programming.</p>
<p>Arithmetic sequences, <span class="math inline">\(a, a+h, a+2h, \dots, b\)</span> can be created with the colon operator <code>a:h:b</code> or <code>a:b</code> when <code>h</code> is <code>1</code>. This operator returns a recipe for generating the sequence, it is lazy – it does not generate the sequence. The precedence is such that simple arithmetic operations do not need parentheses. That is <code>a+1:b-1</code> represents the sequence <span class="math inline">\(a+1, a+2, \dots, b-1\)</span>. Arithmetic sequences are useful for indexing into a vector.</p>
<p>The colon operator for floating point values may or may not stop at <code>b</code>. Programming this is harder than it seems. The simple example of <code>1/10:1/10:3/10</code> should be <span class="math inline">\(1/10, 2/10, 3/10\)</span>, but it turns out that on the computer <code>1/10 + 2*1/10</code> is actually <em>just larger</em> than <code>3/10</code>. See the value of <code>3/10 - (1/10 + 1/10 + 1/10)</code> to investigate. However, the algorithm of <code>:</code> does produce the result with <span class="math inline">\(3\)</span> values here.</p>
<div class="cell" data-execution_count="74">
<div class="sourceCode cell-code" id="cb147"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb147-1"><a href="#cb147-1" aria-hidden="true" tabindex="-1"></a><span class="fl">1</span><span class="op">/</span><span class="fl">10</span><span class="op">:</span><span class="fl">1</span><span class="op">/</span><span class="fl">10</span><span class="op">:</span><span class="fl">3</span><span class="op">/</span><span class="fl">10</span> <span class="op">|&gt;</span> collect</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="75">
<pre><code>3-element Vector{Float64}:
 0.1
 0.2
 0.3</code></pre>
</div>
</div>
<p>The <code>range</code> function creates sequences. The common usage is <code>range(start, stop, length)</code>. That is <code>a:h:b</code> specifies a <em>step</em> size, whereas the <em>positional</em> arguments of <code>range</code> specify the number of values between the starting and stopping values. Keyword arguments allow other combinations of <code>start</code>, <code>stop</code>, <code>step</code>, and <code>length</code>. The <code>range</code> returns a similar expression as the colon operator, it does not realize the entire range of values.</p>
<p>Scalar multiplication, scalar division, and addition of like-sized ranges are defined, as they return an arithmetic sequence.</p>
<p>For example, if <code>whale</code> holds beaching numbers for the years 2010 through 2019, we can get the odd years though the following:</p>
<div class="cell" data-execution_count="75">
<div class="sourceCode cell-code" id="cb149"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb149-1"><a href="#cb149-1" aria-hidden="true" tabindex="-1"></a>oddyrs <span class="op">=</span> <span class="fl">2011</span><span class="op">:</span><span class="fl">2</span><span class="op">:</span><span class="fl">2019</span></span>
<span id="cb149-2"><a href="#cb149-2" aria-hidden="true" tabindex="-1"></a>whale[oddyrs <span class="op">.-</span> <span class="fl">2010</span> <span class="op">.+</span> <span class="fl">1</span>] <span class="co"># 1-based offset is why we add 1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="76">
<pre><code>5-element Vector{Int64}:
 122
 111
 111
 133
  79</code></pre>
</div>
</div>
</section>
</section>
<section id="sec-defining-functions" class="level2" data-number="2.3">
<h2 data-number="2.3" class="anchored" data-anchor-id="sec-defining-functions"><span class="header-section-number">2.3</span> Functions</h2>
<p><code>Julia</code> has simple syntax for basic user-defined functions.</p>
<!-- f(x) -->
<p>For simple functions, the syntax borrowed from math is useful. For example, here we define a function to find the <code>mad</code> defined by the median of the transformed data <span class="math inline">\(|x_i - M_x|\)</span>.</p>
<div class="cell" data-execution_count="76">
<div class="sourceCode cell-code" id="cb151"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb151-1"><a href="#cb151-1" aria-hidden="true" tabindex="-1"></a><span class="fu">MAD</span>(x) <span class="op">=</span> <span class="fu">median</span>(<span class="fu">abs</span>.(x <span class="op">.-</span> <span class="fu">median</span>(x)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="77">
<pre><code>MAD (generic function with 1 method)</code></pre>
</div>
</div>
<p>The function is named <code>MAD</code> (to distinguish it from the already defined <code>mad</code> function in <code>StatsBase</code>) and as written accepts a vector and returns a summary number:</p>
<div class="cell" data-execution_count="77">
<div class="sourceCode cell-code" id="cb153"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb153-1"><a href="#cb153-1" aria-hidden="true" tabindex="-1"></a><span class="fu">MAD</span>(whale)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="78">
<pre><code>38.5</code></pre>
</div>
</div>
<p>For functions which are not one liners, a pair of <code>function</code>-<code>end</code> keywords will define a block. For example, the following computes the fifth standardized moment (skewness and kurtosis related to the 3rd and 4th). The first line is one way to document a function in <code>Julia</code>.</p>
<div class="cell" data-execution_count="78">
<div class="sourceCode cell-code" id="cb155"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb155-1"><a href="#cb155-1" aria-hidden="true" tabindex="-1"></a><span class="st">" Compute 5th standardized momemt: m_5 / m_2^(5/2)"</span></span>
<span id="cb155-2"><a href="#cb155-2" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">fifth_sm</span>(x)</span>
<span id="cb155-3"><a href="#cb155-3" aria-hidden="true" tabindex="-1"></a>    xbar, n <span class="op">=</span> <span class="fu">mean</span>(x), <span class="fu">length</span>(x)</span>
<span id="cb155-4"><a href="#cb155-4" aria-hidden="true" tabindex="-1"></a>    m5 <span class="op">=</span> <span class="fu">sum</span>((xi <span class="op">-</span> xbar)<span class="op">^</span><span class="fl">5</span> <span class="cf">for</span> xi <span class="kw">in</span> x) <span class="op">/</span> n</span>
<span id="cb155-5"><a href="#cb155-5" aria-hidden="true" tabindex="-1"></a>    m2 <span class="op">=</span> <span class="fu">sum</span>((xi <span class="op">-</span> xbar)<span class="op">^</span><span class="fl">2</span> <span class="cf">for</span> xi <span class="kw">in</span> x) <span class="op">/</span> n</span>
<span id="cb155-6"><a href="#cb155-6" aria-hidden="true" tabindex="-1"></a>    m5 <span class="op">/</span> m2<span class="op">^</span>(<span class="fl">5</span><span class="op">/</span><span class="fl">2</span>)</span>
<span id="cb155-7"><a href="#cb155-7" aria-hidden="true" tabindex="-1"></a><span class="cf">end</span></span>
<span id="cb155-8"><a href="#cb155-8" aria-hidden="true" tabindex="-1"></a><span class="fu">fifth_sm</span>(whale)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="79">
<pre><code>3.6325544657722215</code></pre>
</div>
</div>
<p>(The above uses a <em>generator</em>, created by the use of <code>for</code> and <code>in</code> to loop over the different values of <code>x</code> rather than broadcasting.)</p>
<p>The repetition above in <code>m5</code> and <code>m2</code> could be avoided if we made a function to compute the sample moments about the mean which accepted both the data and a value for the exponent:</p>
<div class="cell" data-execution_count="79">
<div class="sourceCode cell-code" id="cb157"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb157-1"><a href="#cb157-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sample_moment</span>(x, n<span class="op">=</span><span class="fl">2</span>) <span class="op">=</span> <span class="fu">sum</span>((xi <span class="op">-</span> x)<span class="op">^</span>n <span class="cf">for</span> xi <span class="kw">in</span> x) <span class="op">/</span> <span class="fu">length</span>(x)</span>
<span id="cb157-2"><a href="#cb157-2" aria-hidden="true" tabindex="-1"></a><span class="fu">fifth_sm</span>(x) <span class="op">=</span> <span class="fu">sample_moment</span>(x, <span class="fl">5</span>) <span class="op">/</span> <span class="fu">sample_moment</span>(x)<span class="op">^</span>(<span class="fl">5</span><span class="op">/</span><span class="fl">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="80">
<pre><code>fifth_sm (generic function with 1 method)</code></pre>
</div>
</div>
<p>The variable <code>n</code> is in the second position <em>and</em> has a <em>default</em> value of <code>2</code> which is employed in the denominator of the above, where <code>sample_moment</code> is called with just a single argument.</p>
<p>There can be many positional arguments, only the last ones can have default values specified.</p>
<p>Functions can have a variable number of arguments. Here is a way to find the proportions of a set of numbers that is not stored in a container, but rather is passed to the function separated by commas:</p>
<div class="cell" data-execution_count="80">
<div class="sourceCode cell-code" id="cb159"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb159-1"><a href="#cb159-1" aria-hidden="true" tabindex="-1"></a><span class="fu">proportion</span>(xs<span class="op">...</span>) <span class="op">=</span> <span class="fu">collect</span>(xs) <span class="op">/</span> <span class="fu">sum</span>(xs)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="81">
<pre><code>proportion (generic function with 1 method)</code></pre>
</div>
</div>
<p>The splat syntax <code>...</code> indicates a variable number of arguments in a function definition, and can be used to expand a list of arguments when used inside a function call. The use of <code>collect</code>, above, is needed above to generate a vector, as <code>xs</code> is passed to the body of the function as a tuple and tuples do not have division defined for them.</p>
<p>The <code>mad</code> function from <code>StatsBase</code> has signature <code>mad(x; center=median(x), normalize=true)</code>. This shows the use of <em>keyword arguments</em>. These have a default value, which, as illustrated, can depend on the data passed in. To call a function without the default, the keyword is typed, as in:</p>
<div class="cell" data-execution_count="81">
<div class="sourceCode cell-code" id="cb161"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb161-1"><a href="#cb161-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mad</span>(whale; center<span class="op">=</span><span class="fu">mean</span>(whale))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="82">
<pre><code>74.13011092528009</code></pre>
</div>
</div>
<p>(We use a semicolon to separate positional from keyword arguments, as that is needed to define a keyword, but commas can be used to call a keyword argument. What is important is the keywords come last.)</p>
<p>Functions, as defined above, are methods of a <code>generic function</code>. That is, there can be more than one method for a given name. (There are over 200 methods for the generic function named <code>+</code> in base <code>Julia</code> – and packages can extend this even more.) To direct or <em>dispatch</em> a call to the appropriate method, <code>Julia</code> considers the number and types of its positional arguments. That is, like <code>+</code>, functions can be defined differently for integers and floating point values.</p>
<p>We might like our <code>MAD</code> function to be more graceful than to throw a <code>MethodError</code> if a vector of strings is passed to it. A vector of strings has type <code>Vector{String}</code> so we could make a method just for that type:<a href="#fn17" class="footnote-ref" id="fnref17" role="doc-noteref"><sup>17</sup></a> `Julia makes adding methods easy, but the types that are used to extend the function shouldn’t be owned by other packages, as this is considered <strong>type-piracy</strong>. (Failing to do so may prompt a request for a <em>letter of marque</em>.)</p>
<div class="cell" data-execution_count="82">
<div class="sourceCode cell-code" id="cb163"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb163-1"><a href="#cb163-1" aria-hidden="true" tabindex="-1"></a><span class="fu">MAD</span>(x<span class="op">::</span><span class="dt">Vector{String}</span>) <span class="op">=</span> <span class="fu">print</span>(<span class="st">"Sorry, MAD is not defined for vectors of strings"</span>)</span>
<span id="cb163-2"><a href="#cb163-2" aria-hidden="true" tabindex="-1"></a><span class="fu">MAD</span>([<span class="st">"one"</span>, <span class="st">"three"</span>, <span class="st">"four"</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Sorry, MAD is not defined for vectors of strings</code></pre>
</div>
</div>
<p>(There are many different types that one might wish to exclude; there are many tricks to efficiently code for this. It is common to define a default method which errors and then a special case for the types that can be worked with. As types can be <em>concrete</em>, as the above, or <em>abstract</em>, it is possible to <em>parameterize</em> the type used for dispatch so that subtypes can be identified. For example, some operations return a <code>SubString</code> not a <code>String</code>. A vector of <code>SubString</code> will not match <code>Vector{String}</code> as even though both hold string data. The subtleties of parameterization are necessary to understand to write many special cases, but won’t be necessary in these notes.)</p>
<!-- anonymous functions -->
<p>A <em>higher order</em> function is one that takes one or more <em>functions</em> as an argument. As example is the calling style of <code>findfirst(predicate, x)</code> where <code>predicate</code> is a function which returns a boolean value. Higher-order functions are widely used with data wrangling. For such uses it is convenient to be able to define an <em>anonymous</em> function. These do not create methods for a generic function, as they have no name (though they can be assigned a name). Anonymous functions are easily defined through the pattern: <code>argument(s) -&gt; body</code>, where <code>body</code>, when multi-line, can be contained within <code>begin</code>/<code>end</code> blocks.</p>
<p>For example, to find the index of the first year that there were 200 or more whale beachings we have:</p>
<div class="cell" data-execution_count="83">
<div class="sourceCode cell-code" id="cb165"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb165-1"><a href="#cb165-1" aria-hidden="true" tabindex="-1"></a><span class="fu">findfirst</span>(x <span class="op">-&gt;</span> x <span class="op">&gt;=</span> <span class="fl">200</span>, whale)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="84">
<pre><code>3</code></pre>
</div>
</div>
<p>For the tasks of logical comparisons, there are partially-applied versions of the operators that are essentially defined like anonymous functions (cf.&nbsp;<code>Base.Fix2</code>). In particular, <code>&gt;=(200)</code> can be used for the anonymous function <code>x -&gt; x &gt;= 200</code>. To illustrate, here we see the index of first year where there were 200 or more beachings and the index of the last year, using <code>!</code> to negate a call (even though <code>&gt;=(200)</code> would be identical):</p>
<div class="cell" data-execution_count="84">
<div class="sourceCode cell-code" id="cb167"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb167-1"><a href="#cb167-1" aria-hidden="true" tabindex="-1"></a><span class="fu">findfirst</span>(<span class="op">&gt;=</span>(<span class="fl">200</span>), whale), <span class="fu">findlast</span>(!<span class="fu">&lt;</span>(<span class="fl">200</span>), whale)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="85">
<pre><code>(3, 7)</code></pre>
</div>
</div>
<p>Another example would be to filter out those values less than <code>100</code>. The <code>filter(predicate, v)</code> function does this:</p>
<div class="cell" data-execution_count="85">
<div class="sourceCode cell-code" id="cb169"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb169-1"><a href="#cb169-1" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(<span class="fu">&lt;</span>(<span class="fl">100</span>), whale)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="86">
<pre><code>2-element Vector{Int64}:
 74
 79</code></pre>
</div>
</div>
<section id="broadcasting-alternatives-iteration" class="level4">
<h4 class="anchored" data-anchor-id="broadcasting-alternatives-iteration">Broadcasting alternatives; iteration</h4>
<p>As an illustration of a few other concepts, we consider alternatives to broadcasting that can prove useful. Consider the simplest case of broadcasting a function <code>f</code> over a single collection <code>x</code>.</p>
<p>For example here is broadcasting:</p>
<div class="cell" data-execution_count="86">
<div class="sourceCode cell-code" id="cb171"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb171-1"><a href="#cb171-1" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> [<span class="fl">1</span>, <span class="fl">4</span>, <span class="fl">9</span>]</span>
<span id="cb171-2"><a href="#cb171-2" aria-hidden="true" tabindex="-1"></a><span class="fu">f</span>(x) <span class="op">=</span> <span class="fu">sqrt</span>(x)</span>
<span id="cb171-3"><a href="#cb171-3" aria-hidden="true" tabindex="-1"></a><span class="fu">f</span>.(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="87">
<pre><code>3-element Vector{Float64}:
 1.0
 2.0
 3.0</code></pre>
</div>
</div>
<p>This use of broadcasting is also called the <em>mapping</em> of <code>f</code> over <code>x</code>. The <code>map(f, x)</code> function is defined:</p>
<div class="cell" data-execution_count="87">
<div class="sourceCode cell-code" id="cb173"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb173-1"><a href="#cb173-1" aria-hidden="true" tabindex="-1"></a><span class="fu">map</span>(f, x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="88">
<pre><code>3-element Vector{Float64}:
 1.0
 2.0
 3.0</code></pre>
</div>
</div>
<p>Either broadcasting or <code>map</code> do the following: for each element of <code>x</code> apply the function <code>f</code>. This can be represented with the chaining operator, <code>|&gt;</code>, adjusted to broadcast the values of <code>x</code>:</p>
<div class="cell" data-execution_count="88">
<div class="sourceCode cell-code" id="cb175"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb175-1"><a href="#cb175-1" aria-hidden="true" tabindex="-1"></a>x <span class="op">.|&gt;</span> f</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="89">
<pre><code>3-element Vector{Float64}:
 1.0
 2.0
 3.0</code></pre>
</div>
</div>
<p>The iteration over <code>x</code> can be made explicit with a <code>for</code> loop. The basic syntax would be:</p>
<div class="cell" data-execution_count="89">
<div class="sourceCode cell-code" id="cb177"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb177-1"><a href="#cb177-1" aria-hidden="true" tabindex="-1"></a>out <span class="op">=</span> <span class="dt">Any</span>[]</span>
<span id="cb177-2"><a href="#cb177-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> xi <span class="kw">in</span> x</span>
<span id="cb177-3"><a href="#cb177-3" aria-hidden="true" tabindex="-1"></a>   <span class="fu">push!</span>(out, <span class="fu">f</span>(xi))</span>
<span id="cb177-4"><a href="#cb177-4" aria-hidden="true" tabindex="-1"></a><span class="cf">end</span></span>
<span id="cb177-5"><a href="#cb177-5" aria-hidden="true" tabindex="-1"></a>out</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="90">
<pre><code>3-element Vector{Any}:
 1.0
 2.0
 3.0</code></pre>
</div>
</div>
<p>For loops require extra effort for accumulation, which, in the above, required the selection of a container. We used <code>Any[]</code> to create a zero-length container that can hold any object and push values onto this. If would be preferable to have a concrete type, which in this case is just <code>Float64[]</code>, but that requires some peeking to the output of <code>f</code>. This is to point out some background work performed by <code>map</code> and broadcasting that simplify other common tasks.</p>
<p>The <code>for xi in x</code> part of the for loop assigns <code>xi</code> to each iterate of <code>x</code>. There are some iterations that return more than one value at once, and it is common to see these <em>destructured</em> in the syntax. For example, <code>enumerate</code> is a helper function which takes an iterable object, like a vector, and iterates over both the index and the value:</p>
<div class="cell" data-execution_count="90">
<div class="sourceCode cell-code" id="cb179"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb179-1"><a href="#cb179-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i, xi) <span class="kw">in</span> <span class="fu">enumerate</span>(x)</span>
<span id="cb179-2"><a href="#cb179-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">"element </span><span class="sc">$</span>i<span class="st"> is </span><span class="sc">$</span>xi<span class="st">. "</span>)</span>
<span id="cb179-3"><a href="#cb179-3" aria-hidden="true" tabindex="-1"></a><span class="cf">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>element 1 is 1. element 2 is 4. element 3 is 9. </code></pre>
</div>
</div>
<p>A <em>comprehension</em> is a good alternative to a for loop when accumulation is required and the computation for each iterate is simple to express. Comprehensions have the basic syntax <code>[ex for x in xs]</code> and additional syntax for multiple iterations. The expression <code>ex</code> can use the variable <code>x</code>; <code>xs</code> is some iterable, such as a vector. For example, we might have this alternative to <code>f.(x)</code></p>
<div class="cell" data-execution_count="91">
<div class="sourceCode cell-code" id="cb181"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb181-1"><a href="#cb181-1" aria-hidden="true" tabindex="-1"></a>[xi <span class="op">-</span> <span class="fu">mean</span>(x) for xi <span class="kw">in</span> x]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="92">
<pre><code>3-element Vector{Float64}:
 -3.666666666666667
 -0.666666666666667
  4.333333333333333</code></pre>
</div>
</div>
<p>Comprehensions use <em>generators</em>, which can also be used for many other functions, such as <code>sum</code>, which was previously illustrated. This form has the advantage of not needing to allocate temporary space to compute. For example <code>sum([xi for xi in x])</code> would have to find space for the vector created by the comprehension, but the similar – and easier to type – <code>sum(xi for xi in x)</code> would not.</p>
<p>In this example, we sum the squared differences, passing an optional function to <code>sum</code>:</p>
<div class="cell" data-execution_count="92">
<div class="sourceCode cell-code" id="cb183"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb183-1"><a href="#cb183-1" aria-hidden="true" tabindex="-1"></a><span class="fu">f</span>(x) <span class="op">=</span> x<span class="op">^</span><span class="fl">2</span></span>
<span id="cb183-2"><a href="#cb183-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(f, xi <span class="op">-</span> <span class="fu">mean</span>(whale) <span class="cf">for</span> xi <span class="kw">in</span> whale)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="93">
<pre><code>46020.399999999994</code></pre>
</div>
</div>
<table class="table">
<caption>Various convenient iterators in <code>Julia</code>.</caption>
<colgroup>
<col style="width: 25%">
<col style="width: 75%">
</colgroup>
<thead>
<tr class="header">
<th>Iterator</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>eachindex</code></td>
<td>iterate over each index</td>
</tr>
<tr class="even">
<td><code>values</code></td>
<td>iterate over values in a container</td>
</tr>
<tr class="odd">
<td><code>enumerate</code></td>
<td>iterate over index and value</td>
</tr>
<tr class="even">
<td><code>keys</code></td>
<td>iterate over keys for the container</td>
</tr>
<tr class="odd">
<td><code>pairs</code></td>
<td>iterate over (key,value) pairs in the container</td>
</tr>
<tr class="even">
<td><code>zip</code></td>
<td>iterate over multiple iterators; the value is a tuple with an element from each</td>
</tr>
<tr class="odd">
<td><code>eachcol</code></td>
<td>for tabular data, iterate over the columns</td>
</tr>
<tr class="even">
<td><code>eachrow</code></td>
<td>for tabular data, iterate over the rows</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="sec-numeric-data" class="level2" data-number="2.4">
<h2 data-number="2.4" class="anchored" data-anchor-id="sec-numeric-data"><span class="header-section-number">2.4</span> Numeric summaries</h2>
<p>The <code>StatsBase</code> package provides numerous functions to compute numeric summaries of a univariate data set.</p>
<p>For <strong>measures of center</strong> we have the mean (average), median (middle value), and mode (most common value):</p>
<div class="cell" data-execution_count="93">
<div class="sourceCode cell-code" id="cb185"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb185-1"><a href="#cb185-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(whale), <span class="fu">median</span>(whale), <span class="fu">mode</span>(whale), <span class="fu">mean</span>(<span class="fu">trim</span>(whale, prop<span class="op">=</span><span class="fl">0.2</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="94">
<pre><code>(152.4, 127.5, 111, 140.66666666666666)</code></pre>
</div>
</div>
<p>The trimmed mean is computed by composing <code>mean</code> with the <code>trim</code> function which returns a generator producing the trimmed values (with proportion to trim specified to <code>prop</code>).</p>
<p>For <strong>measures of spread</strong> we have the standard deviation, the median absolute deviation, and the inter-quartile range (<span class="math inline">\(Q_3 - Q_1\)</span>):</p>
<div class="cell" data-execution_count="94">
<div class="sourceCode cell-code" id="cb187"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb187-1"><a href="#cb187-1" aria-hidden="true" tabindex="-1"></a><span class="fu">std</span>(whale), <span class="fu">mad</span>(whale), <span class="fu">iqr</span>(whale)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="95">
<pre><code>(71.5078861229849, 57.08018541246567, 86.25)</code></pre>
</div>
</div>
<p>The <code>quantile(x, p)</code> function returns <strong>measures of position</strong>. Keywords <code>alpha</code> and <code>beta</code> can be used to adjust the algorithm employed. The <code>0</code> quantile is the minimum, the <code>1</code> quantile is the maximum, and <code>0.5</code> the median. The <code>p</code> may be an iterable. Here we see that type of <code>p</code> is used to compute the value output:</p>
<div class="cell" data-execution_count="95">
<div class="sourceCode cell-code" id="cb189"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb189-1"><a href="#cb189-1" aria-hidden="true" tabindex="-1"></a><span class="fu">quantile</span>(whale, (<span class="fl">0</span>, <span class="fl">1</span><span class="op">//</span><span class="fl">2</span>, <span class="fl">1.0</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="96">
<pre><code>(74, 255//2, 292.0)</code></pre>
</div>
</div>
<p>The <code>quantile</code> function is used internally by <code>StatsBase</code>: the <code>iqr</code> is defined by the difference of <code>quantile(x, [1/4, 3/4])</code>; the <code>summarystats</code> function returns a summary of a data set, with the 5-number summary of the quantiles (<code>p=0:1/4:1</code>), the mean, the length, and the number of missing data values.</p>
<p>A <strong>measure of position</strong> gives a sense of how large a value is relative to the data set. Knowing a value is the 20th percentile, say, says it is larger than 20 percent of the data and smaller than 80 percent. The percent of data less or equal a value can be computed by <code>sum(data .&lt;= value)</code> or <code>sum(x &lt;= value for x in data)</code>.</p>
<p>The <span class="math inline">\(z\)</span>-score is a different measure of position. The <span class="math inline">\(z\)</span> score is computed by <code>(value - mean(data))/std(data)</code> or for all values at once with:</p>
<div class="cell" data-execution_count="96">
<div class="sourceCode cell-code" id="cb191"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb191-1"><a href="#cb191-1" aria-hidden="true" tabindex="-1"></a>zs <span class="op">=</span> (whale <span class="op">.-</span> <span class="fu">mean</span>(whale)) <span class="op">/</span> <span class="fu">std</span>(whale)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="97">
<pre><code>10-element Vector{Float64}:
 -1.0963825705204249
 -0.4251279355079199
  1.155117351084019
 -0.5789571226982856
  1.9522322301613686
 -0.5789571226982856
  0.8194900335777664
 -0.2712987483175542
  0.05034409762593779
 -1.0264602127066222</code></pre>
</div>
</div>
<p>A rule of thumb, based on a certain bell-shaped distribution, is that values larger than 3 in absolute value are unusual, none of which are seen in this data. The <span class="math inline">\(z\)</span> score measures the difference from the mean on a scale of standard deviations. It is typical form of <em>standardization</em> and is supported directly through either:</p>
<div class="cell" data-execution_count="97">
<div class="sourceCode cell-code" id="cb193"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb193-1"><a href="#cb193-1" aria-hidden="true" tabindex="-1"></a>zs1 <span class="op">=</span> <span class="fu">zscore</span>(whale)</span>
<span id="cb193-2"><a href="#cb193-2" aria-hidden="true" tabindex="-1"></a>zs2 <span class="op">=</span> <span class="fu">standardize</span>(ZScoreTransform, <span class="fu">Float64</span>.(whale))</span>
<span id="cb193-3"><a href="#cb193-3" aria-hidden="true" tabindex="-1"></a>zs <span class="op">==</span> zs1 <span class="op">==</span> zs2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="98">
<pre><code>true</code></pre>
</div>
</div>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Why so many measures?
</div>
</div>
<div class="callout-body-container callout-body">
<p>There are two main measures: those based on differences and those based on position.</p>
<p>The mean is defined by</p>
<p><span class="math display">\[
\bar{x} = \frac{1}{n} \sum_{i=1}^n x_i.
\]</span></p>
<p>A property of the mean is when we <em>center</em> by the mean, i.e.&nbsp;take the transformation <span class="math inline">\(y_i = x_i - \bar{x}\)</span>, then the mean of the <span class="math inline">\(y_i\)</span> is just <span class="math inline">\(0\)</span>. Put another way, the mean is the point where the differences to the left and right of the mean even out when added.</p>
<p>The standard deviation, as a sense of scale, has the property that if we center and <em>then scale</em> by the standard deviation, the center will be <span class="math inline">\(0\)</span> and the scale will be <span class="math inline">\(1\)</span>. That is, the <span class="math inline">\(z\)</span>-scores have mean <span class="math inline">\(0\)</span> (as we’ve centered) and standard deviation <span class="math inline">\(1\)</span> (as we’ve scaled) – the <span class="math inline">\(z\)</span> scores speak to the “shape” or distribution of values of a data set.</p>
<p>These measures are sensitive – or not <em>resistant</em> – to one or more <em>outlying</em> values. For example, the average wealth of people in a bar changes dramatically if someone like a pre-crash Elon Musk walks in. The standard deviation is similar. So measures based on position are better when data is <em>skewed</em>, especially if heavily skewed. For these, the median and IQR are not impacted greatly by 1 large value. That is they are resistant to outliers. The extreme values (the minimum and maximum) are less so, so the range of the data is a poor measure of spread, the range of the middle quartiles (the IQR) a resistant measure of spread.</p>
</div>
</div>
<table class="table">
<caption>Various measures of center, spread, and position in a univariate data set.</caption>
<colgroup>
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="header">
<th>Measure</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>mean</code></td>
<td>center</td>
<td>Average value</td>
</tr>
<tr class="even">
<td><code>median</code></td>
<td>center</td>
<td>Middle value</td>
</tr>
<tr class="odd">
<td><code>mean ∘ trim</code></td>
<td>center</td>
<td>Trimmed mean</td>
</tr>
<tr class="even">
<td><code>var</code></td>
<td>spread</td>
<td>“Average” squared distance from mean</td>
</tr>
<tr class="odd">
<td><code>std</code></td>
<td>spread</td>
<td>The square of the variance</td>
</tr>
<tr class="even">
<td><code>mad</code></td>
<td>spread</td>
<td>The median absolute deviation from center</td>
</tr>
<tr class="odd">
<td><code>IQR</code></td>
<td>spread</td>
<td>Range of middle half of data</td>
</tr>
<tr class="even">
<td><code>extrema</code></td>
<td>spread</td>
<td>Smallest and largest values</td>
</tr>
<tr class="odd">
<td><code>quantile</code></td>
<td>position</td>
<td>Value where data would be split for give proportion</td>
</tr>
<tr class="even">
<td><code>summarystats</code></td>
<td>position</td>
<td>The quartiles and extrema</td>
</tr>
<tr class="odd">
<td><code>zscore</code></td>
<td>position</td>
<td>Standardizing transformation</td>
</tr>
</tbody>
</table>
</section>
<section id="sec-shape" class="level2" data-number="2.5">
<h2 data-number="2.5" class="anchored" data-anchor-id="sec-shape"><span class="header-section-number">2.5</span> Shape</h2>
<p>The <span class="math inline">\(5\)</span>-number summary gives some insight into the <em>shape</em> of a distribution, in that it can show skewness. The <code>skewness</code> function numerically quantifies this:</p>
<div class="cell" data-execution_count="98">
<div class="sourceCode cell-code" id="cb195"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb195-1"><a href="#cb195-1" aria-hidden="true" tabindex="-1"></a><span class="fu">skewness</span>(whale)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="99">
<pre><code>0.7785957149991207</code></pre>
</div>
</div>
<p>Symmetric data has <span class="math inline">\(0\)</span> skew.</p>
<p>The <code>kurtosis</code> function numerically summarizes if a distribution has long or short tails compared to a benchmark distribution, the normal:</p>
<div class="cell" data-execution_count="99">
<div class="sourceCode cell-code" id="cb197"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb197-1"><a href="#cb197-1" aria-hidden="true" tabindex="-1"></a><span class="fu">kurtosis</span>(whale)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="100">
<pre><code>-0.5833928499406711</code></pre>
</div>
</div>
<p>However, the <strong>shape of a distribution</strong> is best seen graphically.</p>
<p>A stem or stem-and-leaf plot is useful summary of a data set that can be computed easily by hand for modest sized data. Basically numbers are coded in terms of a stem and a leaf. The stems are not repeated, so the data can be more compactly displayed. The data is organized so that the extrema, the median, and the shape of the data can be quickly gleaned.</p>
<p>The basic stem plot is not part of the <code>StatsBase</code> package. This one, below, is modified from a RosettaCode <a href="https://rosettacode.org/wiki/Stem-and-leaf_plot#Julia">submission</a>. It is simplified by assuming non-negative data.</p>
<div class="cell" data-execution_count="100">
<div class="sourceCode cell-code" id="cb199"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb199-1"><a href="#cb199-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">Printf</span></span>
<span id="cb199-2"><a href="#cb199-2" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">stemleaf</span>(a<span class="op">::</span><span class="dt">Array{T,1}</span>, leafsize<span class="op">=</span><span class="fl">1</span>) <span class="kw">where</span> {T<span class="op">&lt;:</span><span class="dt">Real</span>}</span>
<span id="cb199-3"><a href="#cb199-3" aria-hidden="true" tabindex="-1"></a>    ls <span class="op">=</span> <span class="fl">10</span><span class="op">^</span><span class="fu">floor</span>(<span class="dt">Int</span>, <span class="fu">log10</span>(leafsize))</span>
<span id="cb199-4"><a href="#cb199-4" aria-hidden="true" tabindex="-1"></a>    aa <span class="op">=</span> <span class="fu">floor</span>.(<span class="dt">Int</span>, <span class="fu">sort</span>(a)<span class="op">/</span>ls)</span>
<span id="cb199-5"><a href="#cb199-5" aria-hidden="true" tabindex="-1"></a>    out <span class="op">=</span> <span class="fu">divrem</span>.(aa, <span class="fl">10</span>)</span>
<span id="cb199-6"><a href="#cb199-6" aria-hidden="true" tabindex="-1"></a>    stem, leaf <span class="op">=</span> <span class="fu">first</span>.(out), <span class="fu">last</span>.(out)</span>
<span id="cb199-7"><a href="#cb199-7" aria-hidden="true" tabindex="-1"></a>    io <span class="op">=</span> <span class="fu">IOBuffer</span>()</span>
<span id="cb199-8"><a href="#cb199-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> stem[<span class="fl">1</span>]<span class="op">:</span>stem[<span class="kw">end</span>]</span>
<span id="cb199-9"><a href="#cb199-9" aria-hidden="true" tabindex="-1"></a>        i <span class="op">!=</span> <span class="fl">0</span> <span class="op">||</span> <span class="fu">println</span>(io, <span class="st">""</span>)</span>
<span id="cb199-10"><a href="#cb199-10" aria-hidden="true" tabindex="-1"></a>        <span class="fu">print</span>(io, (<span class="pp">@sprintf</span> <span class="st">"%10d | "</span> i))</span>
<span id="cb199-11"><a href="#cb199-11" aria-hidden="true" tabindex="-1"></a>        <span class="fu">println</span>(io, <span class="fu">join</span>(<span class="fu">map</span>(string, leaf[stem <span class="op">.==</span> i]), <span class="st">""</span>))</span>
<span id="cb199-12"><a href="#cb199-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb199-13"><a href="#cb199-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">println</span>(io, <span class="st">" Leaf Unit = "</span> <span class="op">*</span> <span class="fu">string</span>(<span class="fu">convert</span>(T, ls)))</span>
<span id="cb199-14"><a href="#cb199-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">String</span>(<span class="fu">take!</span>(io))</span>
<span id="cb199-15"><a href="#cb199-15" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="101">
<pre><code>stemleaf (generic function with 2 methods)</code></pre>
</div>
</div>
<p>For the <code>whale</code> data, which is spread out over a wide range, we use a leaf size of 10:</p>
<div class="cell" data-execution_count="101">
<div class="sourceCode cell-code" id="cb201"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb201-1"><a href="#cb201-1" aria-hidden="true" tabindex="-1"></a><span class="fu">stemleaf</span>(whale, <span class="fl">10</span>) <span class="op">|&gt;</span> print</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
         0 | 77
         1 | 11235
         2 | 139
 Leaf Unit = 10</code></pre>
</div>
</div>
<p>We can identify <code>0|7</code> which is <code>0*100 + 70</code> or 70 as the “smallest” value. The <em>actual</em> smallest value is <span class="math inline">\(74\)</span>, but the data is rounded for this graphic so that just two digits (the stem and leaf) can represent all the values. Similarly 290 is identified as the largest values (which is actually 292).</p>
<p>For graphical summaries of data, we will utilize the <code>StatsPlots</code> package, which adds to the <code>Plots</code> package recipes for many statistical graphics.</p>
<div class="sourceCode cell-code" id="cb203"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb203-1"><a href="#cb203-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">StatsPlots</span></span>
<span id="cb203-2"><a href="#cb203-2" aria-hidden="true" tabindex="-1"></a>p1 <span class="op">=</span> <span class="fu">histogram</span>(whale; normalize<span class="op">=</span><span class="cn">true</span>, legend<span class="op">=</span><span class="cn">false</span>)</span>
<span id="cb203-3"><a href="#cb203-3" aria-hidden="true" tabindex="-1"></a><span class="fu">density!</span>(p1,whale, linewidth<span class="op">=</span><span class="fl">3</span>)</span>
<span id="cb203-4"><a href="#cb203-4" aria-hidden="true" tabindex="-1"></a>p2 <span class="op">=</span> <span class="fu">boxplot</span>(whale, legend<span class="op">=</span><span class="cn">false</span>)</span>
<span id="cb203-5"><a href="#cb203-5" aria-hidden="true" tabindex="-1"></a><span class="fu">dotplot!</span>(p2, whale);</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell" data-execution_count="103">
<div class="cell-output cell-output-display" data-execution_count="104">
<div id="fig-hist-density-boxplot-dotplot" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="univariate-julia_files/figure-html/fig-hist-density-boxplot-dotplot-output-1.svg" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Figure 2.1: Various graphical summaries of the <code>whale</code> data, which show a slight skew.</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p>The figures are shown in <a href="#fig-hist-density-boxplot-dotplot">Figure&nbsp;<span>2.1</span></a>. The <code>histogram</code> has <code>normalize=true</code> passed to it to have total area of 1 allowing a density curve to be superimposed. The <code>Plots</code> packages uses the <code>!</code> convention to indicate that <code>density!</code> should use the current figure to layer on a density plot. The boxplot and dotplot are plotted side by side, to show how the boxplot summarizes the data through the quartiles, with the data split into quarters by the box and its middle line.</p>
<p>A <em>quantile-normal</em> plot is a graphic to assess if a data set comes from a <em>normal distribution</em>, a reference bell shaped distribution. The basic graphic is a scatter plot of a quantile of the data set with a corresponding quantile of the reference distribution. If the data set has a roughly bell-shaped distribution with “typical” tails, then the dots will mostly fall on a straight line; if the data set is skewed one edge will deviate from the line; if the data set is symmetric, but has long tails these will shows a deviations in both edges of the line. The <code>qqnorm</code> function produces <a href="#fig-quantile-normal">Figure&nbsp;<span>2.2</span></a>:</p>
<div class="cell" data-execution_count="104">
<div class="sourceCode cell-code" id="cb204"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb204-1"><a href="#cb204-1" aria-hidden="true" tabindex="-1"></a><span class="fu">qqnorm</span>(whale; legend<span class="op">=</span><span class="cn">false</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="105">
<div id="fig-quantile-normal" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="univariate-julia_files/figure-html/fig-quantile-normal-output-1.svg" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Figure 2.2: A quantile-normal plot of the <code>whale</code> data</figcaption><p></p>
</figure>
</div>
</div>
</div>


</section>
<section class="footnotes footnotes-end-of-document" role="doc-endnotes">
<hr>
<ol>
<li id="fn1" role="doc-endnote"><p>The parentheses for constructing tuples with 2 or more elements are technically optional, a fact that is useful for bundling different outputs into one<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2" role="doc-endnote"><p>The output of the following command is displayed as a tuple, as the commas used create the tuple, even if not enclosed in parentheses.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3" role="doc-endnote"><p>The <code>var</code> implementation is via a <em>string macro</em>, and is documented through <code>@var_str</code>.<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4" role="doc-endnote"><p>In <code>Julia</code> there are options to have offsets for indexing, e.g.&nbsp;<code>OffsetArrays</code> that allow for other access patterns, such as would be useful for zero-based indexing.<a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn5" role="doc-endnote"><p>This example uses the <code>colon</code> operator to produce a range of values between it two arguments with increment of <span class="math inline">\(1\)</span>.<a href="#fnref5" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn6" role="doc-endnote"><p>Arrays can be <span class="math inline">\(n\)</span> dimensional, so there may be <span class="math inline">\(1\)</span> or more index to specify<a href="#fnref6" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn7" role="doc-endnote"><p>Though <code>:</code> does, as it is a function, not a keywoard.<a href="#fnref7" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn8" role="doc-endnote"><p>The <code>:</code> <em>copies</em> on the right-hand side, but does in-place assignment on the left-hand side<a href="#fnref8" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn9" role="doc-endnote"><p>With data frames, the <code>allowmissing!</code> function is used, as well.<a href="#fnref9" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn10" role="doc-endnote"><p>The <code>allowmissing</code> function creates a union type with <code>Missing</code> in addition to the original data type. It some printouts, a <code>?</code> is appended to the type name to indicate this addition.<a href="#fnref10" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn11" role="doc-endnote"><p>Also the <code>@.</code> <em>macro</em> can automatically broadcast all operations.<a href="#fnref11" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn12" role="doc-endnote"><p>The colon operator <code>a:b</code> returns an iterator to produce “<code>a</code>, <code>a+1</code>, …, <code>b</code>”.<a href="#fnref12" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn13" role="doc-endnote"><p>The expression <code>s^i</code> just calls <code>repeat(s, i)</code>, for these types.<a href="#fnref13" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn14" role="doc-endnote"><p>These are illustrated in the <code>stemplot</code> function defined later.<a href="#fnref14" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn15" role="doc-endnote"><p>There are also Demi (3oz), short (8oz), and Trenta (31oz).<a href="#fnref15" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn16" role="doc-endnote"><p>Different date formats are possible, see <code>?DateFormat</code> for details.<a href="#fnref16" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn17" role="doc-endnote"><p>To extend the <code>mad</code> function from <code>StatsBase</code> requires the extra step of <em>importing</em> that function <em>or</em> qualifying it with its module, as in <code>StatsBase.mad(...) = ...</code>.<a href="#fnref17" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      let href = ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
    var links = window.document.querySelectorAll('a:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
          // target, if specified
          link.setAttribute("target", "_blank");
      }
    }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../index.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Julia introduction</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../EDA/tabular-data-julia.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Tabular data</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-right">© Copyright 2023, John Verzani. All rights reserved.</div>
  </div>
</footer>



</body></html>